(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{"/mmE":function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return i})),a.d(t,"default",(function(){return d}));var n=a("wx14"),o=a("zLVn"),l=(a("q1tI"),a("7ljp")),r=a("013z"),c=(a("qKvR"),["components"]),i={},s={_frontmatter:i},b=r.a;function d(e){var t=e.components,a=Object(o.a)(e,c);return Object(l.b)(b,Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h1",null,"Documentation Development setup"),Object(l.b)("p",null,"Gatsby themes encapsulate all of the configuration and implementation details of Gatsby websites. This GitHub repository has been built with a dependancy on the gatsby-theme-carbon package. The primary goal of gatsby-theme-carbon is to get content authors speaking the IBM Design Language with Carbon as soon as possible. This GiHub repository is connected to Travis any commit will cause a build of the GitHub pages to be triggered. A better way of working is to use the tooling from a loacal system"),Object(l.b)("h2",null,"Local tooling installation"),Object(l.b)("p",null,"If you want to test the documentation pages you’re developing, it is best to run Gatsby in a container and map your local doc folder to a folder inside the container. This avoids having to install nvm and many modules on your workstation."),Object(l.b)("p",null,"Do the following:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Make sure you have cloned this repository to your development server"),Object(l.b)("li",{parentName:"ul"},"Start from the main directory of the cloud-pak-deployer repository")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"cd doc\npodman build -t cpd-doc .\n")),Object(l.b)("p",null,"This will build a Red Hat UBI image with ",Object(l.b)("inlineCode",{parentName:"p"},"nvm")," and the required Node.js modules already installed. It will take ~5-10 minutes to complete this step, dependent on your network bandwidth."),Object(l.b)("h2",null,"Running the documentation image"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"podman rm -f cpd-doc 2>/dev/null && \\\nrm -rf public node_modules .cache package-lock.json && \\\npodman run --name cpd-doc -d -p 8000:8000 -v $PWD:/doc:Z cpd-doc:latest && \\\npodman logs -fl\n")),Object(l.b)("p",null,"This will start the container as a daemon and tail the logs. It will take approximaely 5-10 minutes to download packages and build the server. Once finished, you will see the following message:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-output"},"✖ 6 problems (0 errors, 6 warnings)\n\nsuccess Building development bundle - 369.543s\n")),Object(l.b)("p",null,"Whenever you save changes to a document, the logs will show something:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-output"},"info changed file at /doc/src/pages/tools/development-setup.mdx\nsuccess building schema - 0.634s\ninfo Total nodes: 147, SitePage nodes: 17 (use --verbose for breakdown)\nsuccess createPages - 0.004s\nsuccess Checking for changed pages - 0.001s\nsuccess update schema - 0.047s\nsuccess onPreExtractQueries - 0.001s\nsuccess extract queries from components - 0.624s\n...\nsuccess Re-building development bundle - 2.436s\n")),Object(l.b)("h2",null,"Starting the browswer"),Object(l.b)("p",null,"Once you the container has fully started, it automatically tracks all changes in under the ",Object(l.b)("inlineCode",{parentName:"p"},"doc")," folder and updates the pages site automatically. You can view the site by opening a browswer for URL:"),Object(l.b)("p",null,"http://localhost:8000"),Object(l.b)("h2",null,"Stopping the documentation container"),Object(l.b)("p",null,"If you don’t want to test your changes locally anymore, stop the docker container."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"podman kill cpd-doc\n")),Object(l.b)("p",null,"Next time you want to test your changes, re-run the series of commands that delete the container, delete cache and build the documentation."),Object(l.b)("h2",null,"Removing the docker container and image"),Object(l.b)("p",null,"If you want to remove all from your development server, do the following:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"podman rm -f cpd-doc\npodman rmi -f cpd-doc:latest\n")),Object(l.b)("p",null,"Note that after merging your updated documentation with the ",Object(l.b)("inlineCode",{parentName:"p"},"main")," branch, the pages site will be rendered by a GitHub action. Go to GitHub Actions if you want to monitor the build process."))}d.isMDXComponent=!0},"013z":function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),l=a("NmYn"),r=a.n(l),c=a("Wbzz"),i=a("Xrax"),s=a("k4MR"),b=a("TSYQ"),d=a.n(b),u=a("QH2O"),m=a.n(u),p=a("qKvR"),h=function(e){var t,a=e.title,n=e.theme,o=e.tabs,l=void 0===o?[]:o;return Object(p.b)("div",{className:d()(m.a.pageHeader,(t={},t[m.a.withTabs]=l.length,t[m.a.darkMode]="dark"===n,t))},Object(p.b)("div",{className:"bx--grid"},Object(p.b)("div",{className:"bx--row"},Object(p.b)("div",{className:"bx--col-lg-12"},Object(p.b)("h1",{id:"page-title",className:m.a.text},a)))))},g=a("BAC9"),O=function(e){var t=e.relativePagePath,a=e.repository,n=Object(c.useStaticQuery)("1364590287").site.siteMetadata.repository,o=a||n,l=o.baseUrl,r=o.subDirectory,i=l+"/edit/"+o.branch+r+"/src/pages"+t;return l?Object(p.b)("div",{className:"bx--row "+g.row},Object(p.b)("div",{className:"bx--col"},Object(p.b)("a",{className:g.link,href:i},"Edit this page on GitHub"))):null},j=a("FCXl"),f=a("dI71"),x=a("I8xM"),w=function(e){function t(){return e.apply(this,arguments)||this}return Object(f.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,o=n.split("/").filter(Boolean).slice(-1)[0],l=a.map((function(e){var t,a=r()(e,{lower:!0,strict:!0}),l=a===o,i=new RegExp(o+"/?(#.*)?$"),s=n.replace(i,a);return Object(p.b)("li",{key:e,className:d()((t={},t[x.selectedItem]=l,t),x.listItem)},Object(p.b)(c.Link,{className:x.link,to:""+s},e))}));return Object(p.b)("div",{className:x.tabsContainer},Object(p.b)("div",{className:"bx--grid"},Object(p.b)("div",{className:"bx--row"},Object(p.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(p.b)("nav",{"aria-label":t},Object(p.b)("ul",{className:x.list},l))))))},t}(o.a.Component),y=a("MjG9"),v=a("CzIb"),T=a("Asxa"),k=a("OIbQ"),N=a.n(k),P=function(e){var t=e.date,a=new Date(t);return t?Object(p.b)(T.c,{className:N.a.row},Object(p.b)(T.a,null,Object(p.b)("div",{className:N.a.text},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null};t.a=function(e){var t=e.pageContext,a=e.children,n=e.location,o=e.Title,l=t.frontmatter,b=void 0===l?{}:l,d=t.relativePagePath,u=t.titleType,m=b.tabs,g=b.title,f=b.theme,x=b.description,T=b.keywords,k=b.date,N=Object(v.a)().interiorTheme,I=Object(c.useStaticQuery)("2456312558").site.pathPrefix,H=I?n.pathname.replace(I,""):n.pathname,C=m?H.split("/").filter(Boolean).slice(-1)[0]||r()(m[0],{lower:!0}):"",E=f||N;return Object(p.b)(s.a,{tabs:m,homepage:!1,theme:E,pageTitle:g,pageDescription:x,pageKeywords:T,titleType:u},Object(p.b)(h,{title:o?Object(p.b)(o,null):g,label:"label",tabs:m,theme:E}),m&&Object(p.b)(w,{title:g,slug:H,tabs:m,currentTab:C}),Object(p.b)(y.a,{padded:!0},a,Object(p.b)(O,{relativePagePath:d}),Object(p.b)(P,{date:k})),Object(p.b)(j.a,{pageContext:t,location:n,slug:H,tabs:m,currentTab:C}),Object(p.b)(i.a,null))}},BAC9:function(e,t,a){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,t,a){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},OIbQ:function(e,t,a){e.exports={bxTextTruncateEnd:"last-modified-date-module--bx--text-truncate--end--123zi",bxTextTruncateFront:"last-modified-date-module--bx--text-truncate--front--3xeKz",text:"last-modified-date-module--text--24m-4",row:"last-modified-date-module--row--2BquN"}},QH2O:function(e,t,a){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}}}]);
//# sourceMappingURL=component---src-pages-development-doc-development-setup-index-mdx-59c955341b70a2834fe0.js.map