{"componentChunkName":"component---src-pages-troubleshooting-cp-4-d-uninstall-mdx","path":"/troubleshooting/cp4d-uninstall/","result":{"pageContext":{"frontmatter":{"title":"Uninstall Cloud Pak for Data"},"relativePagePath":"/troubleshooting/cp4d-uninstall.mdx","titleType":"page","MdxNode":{"id":"14dfe51c-d8a5-5956-b997-31df00091d5f","children":[],"parent":"4efd8f1f-b124-544f-8ac5-d7eba1342ca0","internal":{"content":"---\ntitle: Uninstall Cloud Pak for Data\n---\n\n# Uninstall Cloud Pak for Data and Foundational Services\n\n## Check all IBM CRs in the Cloud Pak for Data project\n```\noc project zen-40\noc get $(oc api-resources --namespaced=true --verbs=list -o name | grep ibm | awk '{printf \"%s%s\",sep,$0;sep=\",\"}')  --ignore-not-found -o=custom-columns=KIND:.kind,NAME:.metadata.name --sort-by='kind'\n```\n\n## Remove all cartridge CRs\n```\noc delete wkc --all\noc delete ws --all\noc delete wmlbase --all\noc delete ccs --all\n...\n```\n\nIf you want to, you can hit Ctrl-C when deleting the CCS object, the deletion continues to be carried out in the background by the operator. \n\n## Remove Cloud Pak for Data CR\n\n** IMPORTANT: You must now wait until all CRs have been deleted from the namespace before deleting the Ibmcpd CR.**\n```\noc delete ibmcpd --all\n```\n\nRepeat the command to check all CRs in the cluster and wait until all objects in the Cloud Pak for Data namespace have been deleted.\n\n## Delete CP4D namespace\nNow you can delete the CP4D namespace. This can take a few minutes.\n```\noc delete namespace zen-40\n```\n\n## Remove Foundational Services\n\n### Check CRs in ibm-common-services\n```\noc project ibm-common-services\noc get $(oc api-resources --namespaced=true --verbs=list -o name | grep ibm | awk '{printf \"%s%s\",sep,$0;sep=\",\"}')  --ignore-not-found -o=custom-columns=KIND:.kind,NAME:.metadata.name --sort-by='kind'\n```\n\n### Remove CommonService operator\n```\noc project ibm-common-services\noc delete CommonService common-service\noc delete sub -l operators.coreos.com/ibm-common-service-operator.ibm-common-services\noc delete csv -l operators.coreos.com/ibm-common-service-operator.ibm-common-services\n\noc delete operandrequest --all\n\noc delete operandconfig --all\n\noc delete operandregistry --all\n\noc delete nss --all\n\noc delete sub --all\noc delete csv --all\n\noc delete ns ibm-common-services\n\noc delete catsrc -n openshift-marketplace \\\n    $(oc get catsrc -n openshift-marketplace \\\n    --no-headers | grep -i ibm | awk '{print $1}')\n```\n\n### Clean up left-over objects\nMost of the below commands will issue an error because the object no longer exists.\n```\noc -n kube-system delete secret icp-metering-api-secret \noc -n kube-public delete configmap ibmcloud-cluster-info\noc -n kube-public delete secret ibmcloud-cluster-ca-cert\noc delete ValidatingWebhookConfiguration cert-manager-webhook ibm-cs-ns-mapping-webhook-configuration --ignore-not-found\noc delete MutatingWebhookConfiguration cert-manager-webhook ibm-common-service-webhook-configuration ibm-operandrequest-webhook-configuration namespace-admission-config --ignore-not-found\noc delete namespace services\noc delete nss --all\n```\n","type":"Mdx","contentDigest":"461f24d01f01d8e16842a54e1d7bcdf8","owner":"gatsby-plugin-mdx","counter":193},"frontmatter":{"title":"Uninstall Cloud Pak for Data"},"exports":{},"rawBody":"---\ntitle: Uninstall Cloud Pak for Data\n---\n\n# Uninstall Cloud Pak for Data and Foundational Services\n\n## Check all IBM CRs in the Cloud Pak for Data project\n```\noc project zen-40\noc get $(oc api-resources --namespaced=true --verbs=list -o name | grep ibm | awk '{printf \"%s%s\",sep,$0;sep=\",\"}')  --ignore-not-found -o=custom-columns=KIND:.kind,NAME:.metadata.name --sort-by='kind'\n```\n\n## Remove all cartridge CRs\n```\noc delete wkc --all\noc delete ws --all\noc delete wmlbase --all\noc delete ccs --all\n...\n```\n\nIf you want to, you can hit Ctrl-C when deleting the CCS object, the deletion continues to be carried out in the background by the operator. \n\n## Remove Cloud Pak for Data CR\n\n** IMPORTANT: You must now wait until all CRs have been deleted from the namespace before deleting the Ibmcpd CR.**\n```\noc delete ibmcpd --all\n```\n\nRepeat the command to check all CRs in the cluster and wait until all objects in the Cloud Pak for Data namespace have been deleted.\n\n## Delete CP4D namespace\nNow you can delete the CP4D namespace. This can take a few minutes.\n```\noc delete namespace zen-40\n```\n\n## Remove Foundational Services\n\n### Check CRs in ibm-common-services\n```\noc project ibm-common-services\noc get $(oc api-resources --namespaced=true --verbs=list -o name | grep ibm | awk '{printf \"%s%s\",sep,$0;sep=\",\"}')  --ignore-not-found -o=custom-columns=KIND:.kind,NAME:.metadata.name --sort-by='kind'\n```\n\n### Remove CommonService operator\n```\noc project ibm-common-services\noc delete CommonService common-service\noc delete sub -l operators.coreos.com/ibm-common-service-operator.ibm-common-services\noc delete csv -l operators.coreos.com/ibm-common-service-operator.ibm-common-services\n\noc delete operandrequest --all\n\noc delete operandconfig --all\n\noc delete operandregistry --all\n\noc delete nss --all\n\noc delete sub --all\noc delete csv --all\n\noc delete ns ibm-common-services\n\noc delete catsrc -n openshift-marketplace \\\n    $(oc get catsrc -n openshift-marketplace \\\n    --no-headers | grep -i ibm | awk '{print $1}')\n```\n\n### Clean up left-over objects\nMost of the below commands will issue an error because the object no longer exists.\n```\noc -n kube-system delete secret icp-metering-api-secret \noc -n kube-public delete configmap ibmcloud-cluster-info\noc -n kube-public delete secret ibmcloud-cluster-ca-cert\noc delete ValidatingWebhookConfiguration cert-manager-webhook ibm-cs-ns-mapping-webhook-configuration --ignore-not-found\noc delete MutatingWebhookConfiguration cert-manager-webhook ibm-common-service-webhook-configuration ibm-operandrequest-webhook-configuration namespace-admission-config --ignore-not-found\noc delete namespace services\noc delete nss --all\n```\n","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/troubleshooting/cp4d-uninstall.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}