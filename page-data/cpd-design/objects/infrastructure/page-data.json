{"componentChunkName":"component---src-pages-cpd-design-objects-infrastructure-mdx","path":"/cpd-design/objects/infrastructure/","result":{"pageContext":{"frontmatter":{"title":"Infrastructure configuration","tabs":["Objects","Vault","Infrastructure","OpenShift","Cloud Paks","Cartridges","Configuration","Other"]},"relativePagePath":"/cpd-design/objects/infrastructure.mdx","titleType":"page","MdxNode":{"id":"df2f6719-4dbb-553d-a3a0-5327e8cbe37a","children":[],"parent":"916ccfb8-53c3-5548-a4a4-96db6002c64d","internal":{"content":"---\ntitle: Infrastructure configuration\ntabs:\n  [\n    \"Objects\",\n    \"Vault\",\n    \"Infrastructure\",\n    \"OpenShift\",\n    \"Cloud Paks\",\n    \"Cartridges\",\n    \"Configuration\",\n    \"Other\",\n  ]\n---\n\n# Infrastructure configuration\n\nInfrastructure definitions depend on the cloud provider that is used for the provisioning.\n\nThere are 3 cloud providers for the infrastructure objects:\n\n- [IBM Cloud](#ibm-cloud)\n- [Microsoft Azure](#microsoft-azure)\n- [vSphere](#vsphere)\n\n## IBM Cloud\n\nFor IBM Cloud, the following object types are supported:\n\n- [provider](#ibm-cloud-provider)\n- [resource_group](#ibm-cloud-resource_group)\n- [ssh_keys](#ibm-cloud-ssh_keys)\n- [address_prefix](#ibm-cloud-address_prefix)\n- [subnet](#ibm-cloud-subnet)\n- [network_acl](#ibm-cloud-network_acl)\n- [security_group](#ibm-cloud-security_group)\n- [vsi](#ibm-cloud-vsi)\n- [transit_gateway](#ibm-cloud-transit_gateway)\n- [nfs_server](#ibm-cloud-nfs_server)\n- [serviceid](#serviceid)\n- [cos](#cos)\n\n### IBM Cloud `provider`\n\nDefines the provider that Terraform will use for managing the IBM Cloud assets.\n\n```\nprovider:\n- name: ibm\n  region: eu-de\n```\n\n#### Property explanation\n\n| Property | Description                  | Mandatory | Allowed values       |\n| -------- | ---------------------------- | --------- | -------------------- |\n| name     | Name of the provider cluster | Yes       | ibm                  |\n| region   | Region to connect to         | Yes       | Any IBM Cloud region |\n\n### IBM Cloud `resource_group`\n\nThe resource group is for cloud asset grouping purposes. You can define multiple resource groups in your IBM cloud account to group the provisioned assets. If you do not need to group your assets, choose `default`.\n\n```\nresource_group:\n- name: default\n```\n\n#### Property explanation\n\n| Property | Description                         | Mandatory | Allowed values |\n| -------- | ----------------------------------- | --------- | -------------- |\n| name     | Name of the existing resource group | Yes       |                |\n\n### IBM Cloud `ssh_keys`\n\nSSH keys to connect to VSIs. If you have Virtual Server Instances in your VPC, you will need an SSH key to connect to them. SSH keys defined here will be looked up in the vault and created if they don't exist already.\n\n```\nssh_keys:\n- name: vsi-access\n  managed: True\n```\n\n#### Property explanation\n\n| Property | Description                                                   | Mandatory | Allowed values        |\n| -------- | ------------------------------------------------------------- | --------- | --------------------- |\n| name     | Name of the SSH key in IBM Cloud                              | Yes       |                       |\n| managed  | Determines if the SSH key will be created if it doesn't exist | No        | true (default), false |\n\n### IBM Cloud `security_rule`\n\nDefines the services (or ports) which are allowed within the context of a VPC and/or VSI.\n\n```\nsecurity_rule:\n- name: https\n  tcp: {port_min: 443, port_max: 443}\n- name: ssh\n  tcp: {port_min: 22, port_max: 22}\n```\n\n#### Property explanation\n\n| Property | Description                                             | Mandatory      | Allowed values |\n| -------- | ------------------------------------------------------- | -------------- | -------------- |\n| name     | Name of the security rule                               | Yes            |                |\n| tcp      | Range of tcp ports (`port_min` and `port_max`) to allow | tcp and/or udp |                |\n| udp      | Range of udp ports (`port_min` and `port_max`) to allow | tcp and/or udp |                |\n\n### IBM Cloud `vpc`\n\nDefines the virtual private cloud which groups the provisioned objects (including VSIs and OpenShift cluster).\n\n```\nvpc:\n- name: sample\n  allow_inbound: ['ssh', 'https']\n```\n\n#### Property explanation\n\n| Property      | Description                                                                                                                                                              | Mandatory | Allowed values            |\n| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------- | ------------------------- |\n| name          | Name of the Virtual Private Cloud                                                                                                                                        | Yes       |                           |\n| managed       | Controls whether the VPC is managed. The default is `True`. Only set to `False` if the VPC is not managed but only referenced by other objects such as transit gateways. | No        | True (default), False     |\n| allow_inbound | Security rules which are allowed for inbound traffic                                                                                                                     | No        | Existing `security_rule`s |\n\n| Property      | Description                                          | Mandatory | Allowed values            |\n| ------------- | ---------------------------------------------------- | --------- | ------------------------- |\n| name          | Name of the Virtual Private Cloud                    | Yes       |                           |\n| allow_inbound | Security rules which are allowed for inbound traffic | No        | Existing `security_rule`s |\n\n### IBM Cloud `address_prefix`\n\nDefines the zones used within the VPC, along with the subnet the addresses will be issued for.\n\n```\n- name: sample-zone-1\n  vpc: sample\n  zone: eu-de-1\n  cidr: 10.27.0.0/26\n- name: sample-zone-2\n  vpc: sample\n  zone: eu-de-2\n  cidr: 10.27.0.64/26\n- name: sample-zone-3\n  vpc: sample\n  zone: eu-de-3\n  cidr: 10.27.0.128/26\n```\n\n#### Property explanation\n\n| Property | Description                                          | Mandatory     | Allowed values |\n| -------- | ---------------------------------------------------- | ------------- | -------------- |\n| name     | Name of the zone                                     | Yes           |                |\n| zone     | Zone in the IBM Cloud                                | Yes           |                |\n| cidr     | Address range that IPs in this zone will fall into   | Yes           |                |\n| vpc      | Virtual Private Cloud this address prefix belongs to | Yes, inferred |                |\n\n### IBM Cloud `subnet`\n\nDefines the subnet that Virtual Server Instances and ROKS compute nodes will be attached to.\n\n```\nsubnet:\n- name: sample-subnet-zone-1\n  address_prefix: sample-zone-1\n  ipv4_cidr_block: 10.27.0.0/26\n  zone: eu-de-1\n  vpc: sample\n  network_acl: sample-acl\n```\n\n#### Property explanation\n\n| Property        | Description                                          | Mandatory               | Allowed values            |\n| --------------- | ---------------------------------------------------- | ----------------------- | ------------------------- |\n| name            | Name of the subnet                                   | Yes                     |                           |\n| address_prefix  | Zone this subnet belongs to                          | Yes                     | Existing zone             |\n| ipv4_cidr_block | Address range that IPs in this subnet will fall into | Yes                     | Range of subrange of zone |\n| zone            | Zone of the address prefix definition                | Yes, inferred           |                           |\n| vpc             | Virtual Private Cloud this subnet prefix belongs to  | Yes, inferred from zone |                           |\n| network_acl     | Reference to the network access control list protecting this subnet | No       |                           |\n\n### IBM Cloud `network_acl`\n\nDefines the network access control list to be associated with subnets to allow or deny traffic from or to external connections. The rules are processed in sequence per direction. Rules that appear higher in the list will be processed first.\n\n```\nnetwork_acl:\n- name: {{ env_id }}-acl\n  vpc_name: {{ env_id }}\n  rules:\n  - name: inbound-ssh\n    action: allow               # Can be allow or deny\n    source: \"0.0.0.0/0\"\n    destination: \"0.0.0.0/0\"\n    direction: inbound\n    tcp:\n      source_port_min: 1        # optional\n      source_port_max: 65535    # optional\n      dest_port_min: 22         # optional\n      dest_port_max: 22         # optional\n  - name: output-udp\n    action: deny                # Can be allow or deny\n    source: \"0.0.0.0/0\"\n    destination: \"0.0.0.0/0\"\n    direction: outbound\n    udp:\n      source_port_min: 1        # optional\n      source_port_max: 65535    # optional\n      dest_port_min: 1000       # optional\n      dest_port_max: 2000       # optional\n  - name: output-icmp\n    action: allow               # Can be allow or deny\n    source: \"0.0.0.0/0\"\n    destination: \"0.0.0.0/0\"\n    direction: outbound\n    icmp:\n      code: 1\n      type: 1\n```\n\n#### Property explanation\n\n| Property        | Description                                          | Mandatory               | Allowed values            |\n| --------------- | ---------------------------------------------------- | ----------------------- | ------------------------- |\n| name            | Name of the network access control liet              | Yes                     |                           |\n| vpc_name        | Virtual Private Cloud this network ACL belongs to    | Yes                     |                           |\n| rules           | Rules to be applied, every rule is an entry in the list | Yes                  |                           |\n| rules.name      | Unique name of the rule                              | Yes                     |                           |\n| rules.action    | Defines whether the traffic is allowed or denied     | Yes                     | allow, deny               |\n| rules.source    | Source address range that defines the rule           | Yes                     |                           |\n| rules.destination | Destination address range that defines the rule    | Yes                     |                           |\n| rules.direction | Inbound or outbound direction of the traffic         | Yes                     | inbound, outbound         |\n| rules.tcp       | Rule for TCP traffic                                 | No                      |                           |\n| rules.tcp.source_port_min | Low value of the source port range         | No, default=1           | 1-65535                   |\n| rules.tcp.source_port_max | High value of the source port range        | No, default=65535       | 1-65535                   |\n| rules.tcp.dest_port_min   | Low value of the destination port range    | No, default=1           | 1-65535                   |\n| rules.tcp.source_port_max | High value of the destination port range   | No, default=65535       | 1-65535                   |\n| rules.udp       | Rule for UDP traffic                                 | No                      |                           |\n| rules.udp.source_port_min | Low value of the source port range         | No, default=1           | 1-65535                   |\n| rules.udp.source_port_max | High value of the source port range        | No, default=65535       | 1-65535                   |\n| rules.udp.dest_port_min   | Low value of the destination port range    | No, default=1           | 1-65535                   |\n| rules.udp.source_port_max | High value of the destination port range   | No, default=65535       | 1-65535                   |\n| rules.icmp      | Rule for ICMP traffic                                | No                      |                           |\n| rules.icmp.code | ICMP traffic code                                    | No, default=all         | 0-255                     |\n| rules.icmp.type | ICMP traffic type                                    | No, default=all         | 0-254                     |\n\n\n### IBM Cloud `vsi`\n\nDefines a Virtual Server Instance within the VPC.\n\n```\nvsi:\n- name: sample-bastion\n  infrastructure:\n    keys:\n    - \"vsi-access\"\n    image: ibm-redhat-8-3-minimal-amd64-3\n    subnet: sample-subnet-zone-1\n    primary_ipv4_address: 10.27.0.4\n    public_ip: True\n    vpc_name: sample\n    zone: eu-de-3\n```\n\n#### Property explanation\n\n| Property                            | Description                                               | Mandatory                 | Allowed values                              |\n| ----------------------------------- | --------------------------------------------------------- | ------------------------- | ------------------------------------------- |\n| name                                | Name of the Virtual Server Instance                       | Yes                       |                                             |\n| infrastructure                      | Infrastructure attributes                                 | Yes                       |                                             |\n| infrastructure.allow_ip_spoofing    | Decide if IP spoofing is allowed for the interface or not | No                        | False (default), True                       |\n| infrastructure.keys                 | List of SSH keys to attach to the VSI                     | Yes                       | Existing `ssh_key`                          |\n| infrastructure.image                | Operating system image to be used                         | Yes                       | Existing image in IBM Cloud                 |\n| infrastructure.subnet               | Subnet the VSI will be connected to                       | Yes                       | Existing `subnet`                           |\n| infrastructure.primary_ipv4_address | IP v4 address that will be assigned to the VSI            | No                        | If specified, address in the `subnet` range |\n| infrastructure.public_ip            | Must a public IP address be attached to this VSI?         | No                        | False (default), True                       |\n| infrastructure.vpc_name             | Virtual Private Cloud this VSI belongs to                 | Yes, inferred from subnet |                                             |\n| infrastructure.zone                 | Zone the VSI will be plaed into                           | Yes, inferred from subnet |                                             |\n\n### IBM Cloud `transit_gateway`\n\nConnects one or more VPCs to each other.\n\n```\ntransit_gateway:\n- name: sample-tgw\n  location: eu-de\n  connections:\n  - vpc: other-vpc\n  - vpc: sample\n```\n\n#### Property explanation\n\n| Property       | Description                                                                                                                                                                                                                            | Mandatory | Allowed values |\n| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | -------------- |\n| name           | Name of the transit gateway                                                                                                                                                                                                            | Yes       |                |\n| location       | IBM Cloud location of the transit gateway                                                                                                                                                                                              | Yes       |                |\n| connections    | Defines which VPCs must be included in the transit gateway                                                                                                                                                                             | Yes       |                |\n| connection.vpc | Defines the VPC to include. Every VPC must exist in the configuration, even if not managed by this configuration. When referencing an existing VPC, make sure that there is a `vpc` object of that name with `managed` set to `False`. | Yes       | Existing `vpc` |\n\n### IBM Cloud `nfs_server`\n\nDefines a Virtual Server Instance within the VPC that will be used as an NFS server.\n\n```\nnfs_server:\n- name: sample-nfs\n  infrastructure:\n    type: vpc\n    vpc_name: sample\n    subnet: sample-subnet-zone-1\n    zone: eu-de-1\n    primary_ipv4_address: 10.27.0.5\n    image: ibm-redhat-8-3-minimal-amd64-3\n    profile: cx2-2x4\n    bastion_host: sample-bastion\n    storage_folder: /data/nfs\n    storage_profile: 10iops-tier\n    keys:\n      - \"sample-nfs-provision\"\n```\n\n#### Property explanation\n\n| Property                            | Description                                                                 | Mandatory                 | Allowed values                              |\n|-------------------------------------|-----------------------------------------------------------------------------|---------------------------|---------------------------------------------|\n| name                                | Name of the Virtual Server Instance                                         | Yes                       |                                             |\n| infrastructure                      | Infrastructure attributes                                                   | Yes                       |                                             |\n| infrastructure.image                | Operating system image to be used                                           | Yes                       | Existing image in IBM Cloud                 |\n| infrastructure.profile              | Server profile to be used, for example cx2-2x4                              | Yes                       | Existing profile in IBM Cloud               |\n| infrastructure.type                 | Type of infrastructure for NFS servers to                                   | Yes     | vpc                                         |\n| infrastructure.vpc_name             | Virtual Private Cloud this VSI belongs to                                   | Yes, inferred from subnet |                                             |\n| infrastructure.subnet               | Subnet the VSI will be connected to                                         | Yes                       | Existing `subnet`                           |\n| infrastructure.zone                 | Zone the VSI will be plaed into                                             | Yes, inferred from subnet |                                             |\n| infrastructure.primary_ipv4_address | IP v4 address that will be assigned to the VSI                              | No                        | If specified, address in the `subnet` range |\n| infrastructure.bastion_host         | Specify the VSI of the bastion to reach this NFS server                     | No                        |                                             |\n| infrastructure.storage_profile      | Storage profile that will be used                                           | Yes                       | 3iops-tier, 5iops-tier, 10iops-tier         |\n| infrastructure.volume_size_gb       | Size of the NFS server data volume                                          | Yes                       |                                             |\n| infrastructure.storage_folder       | Folder that holds the data, this will be mounted from the NFS storage class | Yes                       |                                             |\n| infrastructure.keys                 | List of SSH keys to attach to the NFS server VSI                            | Yes                       | Existing `ssh_key`                          |\n| infrastructure.allow_ip_spoofing    | Decide if IP spoofing is allowed for the interface or not                   | No                        | False (default), True                       |\n\n### IBM Cloud `cos`\n\nDefines a IBM Cloud Cloud Object Storage instance and allows to create buckets.\n\n```\ncos:\n- name: {{ env_id }}-cos\n  plan: standard\n  location: global\n  serviceids:\n  - name: {{ env_id }}-cos-serviceid\n    roles: [\"Manager\", \"Viewer\", \"Administrator\"]\n  buckets:\n  - name: bucketone6c9d6840\n    cross_region_location: eu\n```\n\n#### Property explanation\n\n| Property                        | Description                                                                                           | Mandatory                                    | Allowed values                                                                                       |\n| ------------------------------- | ----------------------------------------------------------------------------------------------------- | -------------------------------------------- | ---------------------------------------------------------------------------------------------------- |\n| name                            | Name of the serviceid                                                                                 | Yes                                          |                                                                                                      |\n| plan                            | short description of the serviceid                                                                    | Yes                                          |                                                                                                      |\n| location                        | collection of servicekeys that should be created for the parent serviceid                             | Yes                                          |                                                                                                      |\n| serviceids                      | Collection of references to defined seriveids                                                         | No                                           |                                                                                                      |\n| serviceids.name                 | Name of the serviceid                                                                                 | Yes                                          |                                                                                                      |\n| serviceids.roles                | An array of strings to define which role should be granted to the serviceid                           | Yes                                          |                                                                                                      |\n| buckets                         | Collection of buckets that should be created inside the cos instance                                  | No                                           |                                                                                                      |\n| buckets[].name                  | Collection of buckets that should be created inside the cos instance                                  | No                                           |                                                                                                      |\n| buckets[].storage_class         | No                                                                                                    | standard (default), vault, cold, flex, smart |\n| buckets[].endpoint_type         | No                                                                                                    | public (default), private                    |\n| buckets[].cross_region_location | If you use this parameter, do not set single_site_location or region_location at the same time.       | Yes (one of)                                 | us, eu, ap                                                                                           |\n| buckets[].region_location       | If you set this parameter, do not set single_site_location or cross_region_location at the same time. | Yes (one of)                                 | au-syd, eu-de, eu-gb, jp-tok, us-east, us-south, ca-tor, jp-osa, br-sao                              |\n| buckets[].single_site_location  | If you set this parameter, do not set region_location or cross_region_location at the same time.      | Yes (one of)                                 | ams03, che01, hkg02, mel01, mex01, mil01, mon01, osl01, par01, sjc04, sao01, seo01, sng01, and tor01 |\n\n\n## Microsoft Azure\n\nFor Microsoft Azure, the following object type is supported:\n\n- [azure_aro](#azure-aro)\n\n### Azure ARO\n\nDefines an infrastructure configuration onto which OpenShift will be provisioned.\n\n```\nazure_aro:\n- name: sample\n  resource_group:\n    name: sample\n    location: westeurope\n  vnet:\n    name: vnet\n    address_space: 10.0.0.0/22\n  control_plane:\n    subnet:\n      name: control-plane-subnet\n      address_prefixes: 10.0.0.0/23\n    vm:\n      size: Standard_D8s_v3\n  compute:\n    subnet:\n      name: compute-subnet\n      address_prefixes: 10.0.2.0/23\n    vm:\n      size: Standard_D16s_v3\n      disk_size_gb: 128\n      count: 3\n```\n\n#### Properties explanation\n\n| Property                              | Description                                                                              | Mandatory | Allowed values                                                                                                                                               |\n| ------------------------------------- | ---------------------------------------------------------------------------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| name                                  | Name of the `azure_aro` definition object, will be referenced by `openshift`             | Yes       |                                                                                                                                                              |\n| resource_group                        | Resource group attributes                                                                | Yes       |                                                                                                                                                              |\n| resource_group.name                   | Name of the resource group (will be provisioned)                                         | Yes       | unique value, it must not exist                                                                                                                              |\n| resource_group.location               | Azure location                                                                           | Yes       | to pick a different location, run: `az account list-locations -o table`                                                                                      |\n| vnet                                  | Virtual network attributes                                                               | Yes       |                                                                                                                                                              |\n| vnet.name                             | Name of the virtual network                                                              | Yes       |                                                                                                                                                              |\n| vnet.address_space                    | Address space of the virtual network                                                     | Yes       |                                                                                                                                                              |\n| control_plane                         | Control plane (master) nodes attributes                                                  | Yes       |                                                                                                                                                              |\n| control_plane.subnet                  | Control plane nodes subnet attributes                                                    | Yes       |                                                                                                                                                              |\n| control_plane.subnet.name             | Name of the control plane nodes subnet                                                   | Yes       |                                                                                                                                                              |\n| control_plane.subnet.address_prefixes | Address prefixes of the control plane nodes subnet (divided by a `,` comma, if relevant) | Yes       |                                                                                                                                                              |\n| control_plane.vm                      | Control plane nodes virtual machine attributes                                           | Yes       |                                                                                                                                                              |\n| control_plane.vm.size                 | Virtual machine size (aka flavour) of the control plane nodes                            | Yes       | `Standard_D8s_v3`, `Standard_D16s_v3`, `Standard_D32s_v3`                                                                                                    |\n| compute                               | Compute (worker) nodes attributes                                                        | Yes       |                                                                                                                                                              |\n| compute.subnet                        | Compute nodes subnet attributes                                                          | Yes       |                                                                                                                                                              |\n| compute.subnet.name                   | Name of the compute nodes subnet                                                         | Yes       |                                                                                                                                                              |\n| compute.subnet.address_prefixes       | Address prefixes of the compute nodes subnet (divided by a `,` comma, if relevant)       | Yes       |                                                                                                                                                              |\n| compute.vm                            | Compute nodes virtual machine attributes                                                 | Yes       |                                                                                                                                                              |\n| compute.vm.size                       | Virtual machine size (aka flavour) of the compute nodes                                  | Yes       | See the full list of [supported virtual machine sizes](https://docs.microsoft.com/en-us/azure/openshift/support-policies-v4#supported-virtual-machine-sizes) |\n| compute.vm.disk_size_gb               | Disk size in GBs of the compute nodes virtual machine                                    | Yes       | minimum value is 128                                                                                                                                         |\n| compute.vm.count                      | Number of compute nodes virtual machines                                                 | Yes       | minimum value is 3                                                                                                                                           |\n\n### `serviceid`\n\nDefines a iam_service_id that can be granted several role based accesss right via attaching iam_policies to it.\n\n```\nserviceid:\n- name: sample-serviceid\n  description: to access ibmcloud services from external\n  servicekeys:\n  - name: primarykey\n```\n\n#### Property explanation\n\n| Property         | Description                                                               | Mandatory | Allowed values |\n| ---------------- | ------------------------------------------------------------------------- | --------- | -------------- |\n| name             | Name of the serviceid                                                     | Yes       |                |\n| description      | short description of the serviceid                                        | No        |                |\n| servicekeys      | collection of servicekeys that should be created for the parent serviceid | No        |                |\n| servicekeys.name | Name of the servicekey                                                    | Yes       |                |\n\n## vSphere\n\nFor vSphere, the following object types are supported:\n\n- [vsphere](#vsphere-vsphere)\n- [vm_definition](#vsphere-vm_definition)\n- [nfs_server](#vsphere-nfs_server)\n\n### vSphere `vsphere`\n\nDefines the vSphere vCenter onto which OpenShift will be provisioned.\n\n```\nvsphere:\n- name: sample\n  vcenter: 10.99.92.13\n  datacenter: Datacenter1\n  datastore: Datastore1\n  cluster: Cluster1\n  network: \"VM Network\"\n  folder: /Datacenter1/vm/sample\n```\n\n#### Property explanation\n\n| Property      | Description                                                                 | Mandatory | Allowed values |\n| ------------- | --------------------------------------------------------------------------- | --------- | -------------- |\n| name          | Name of the vSphere definition, will be referenced by `openshift`           | Yes       |                |\n| vcenter       | Host or IP address of the vSphere Center                                    | Yes       |                |\n| datacenter    | vSphere Data Center to be used for the virtual machines                     | Yes       |                |\n| datastore     | vSphere Datastore to be used for the virtual machines                       | Yes       |                |\n| cluster       | vSphere cluster to be used for the virtual machines                         | Yes       |                |\n| network       | vSphere network to be used for the virtual machines                         | Yes       |                |\n| folder        | Fully qualified folder name into which the OpenShift cluster will be placed | Yes       |                |\n\n### vSphere `vm_definition`\n\nDefines the virtual machine properties to be used for the control-plane nodes and compute nodes.\n\n```\nvm_definition:\n- name: control-plane\n  vcpu: 8\n  memory_mb: 32768\n  boot_disk_size_gb: 100\n- name: compute\n  vcpu: 16\n  memory_mb: 65536\n  boot_disk_size_gb: 200\n  # Optional overrides for vsphere properties\n  # datastore: Datastore1\n  # network: \"VM Network\"\n```\n\n#### Property explanation\n\n| Property          | Description                                                  | Mandatory | Allowed values |\n| ----------------- | ------------------------------------------------------------ | --------- | -------------- |\n| name              | Name of the VM definition, will be referenced by `openshift` | Yes       |                |\n| vcpu              | Number of virtual CPUs to be assigned to the VMs             | Yes       |                |\n| memory_mb         | Amount of memory in MiB of the virtual machines              | Yes       |                |\n| boot_disk_size_gb | Size of the virtual machine boot disk in GiB                 | Yes       |                |\n| datastore         | vSphere Datastore to be used for the virtual machines, overrides `vsphere.datastore` |  No       |  |\n| network           | vSphere network to be used for the virtual machines, overrides `vsphere.network`      | No       |  |\n\n### vSphere `nfs_server`\n\nDefines an existing NFS server that will be used for the OpenShift NFS storage class.\n\n```\nnfs_server:\n- name: sample-nfs\n  infrastructure:\n    host_ip: 10.99.92.31\n    storage_folder: /data/nfs\n```\n\n#### Property explanation\n\n| Property                      | Description                                                                 | Mandatory | Allowed values |\n| ----------------------------- | --------------------------------------------------------------------------- | --------- | -------------- |\n| name                          | Name of the NFS server                                                      | Yes       |                |\n| infrastructure                | Infrastructure attributes                                                   | Yes       |                |\n| infrastructure.host_ip        | Host or IP address of the NFS server                                        | Yes       |                |\n| infrastructure.storage_folder | Folder that holds the data, this will be mounted from the NFS storage class | Yes       |                |\n","type":"Mdx","contentDigest":"eb3525ecee16734c97f9ec4543fc2861","owner":"gatsby-plugin-mdx","counter":222},"frontmatter":{"title":"Infrastructure configuration","tabs":["Objects","Vault","Infrastructure","OpenShift","Cloud Paks","Cartridges","Configuration","Other"]},"exports":{},"rawBody":"---\ntitle: Infrastructure configuration\ntabs:\n  [\n    \"Objects\",\n    \"Vault\",\n    \"Infrastructure\",\n    \"OpenShift\",\n    \"Cloud Paks\",\n    \"Cartridges\",\n    \"Configuration\",\n    \"Other\",\n  ]\n---\n\n# Infrastructure configuration\n\nInfrastructure definitions depend on the cloud provider that is used for the provisioning.\n\nThere are 3 cloud providers for the infrastructure objects:\n\n- [IBM Cloud](#ibm-cloud)\n- [Microsoft Azure](#microsoft-azure)\n- [vSphere](#vsphere)\n\n## IBM Cloud\n\nFor IBM Cloud, the following object types are supported:\n\n- [provider](#ibm-cloud-provider)\n- [resource_group](#ibm-cloud-resource_group)\n- [ssh_keys](#ibm-cloud-ssh_keys)\n- [address_prefix](#ibm-cloud-address_prefix)\n- [subnet](#ibm-cloud-subnet)\n- [network_acl](#ibm-cloud-network_acl)\n- [security_group](#ibm-cloud-security_group)\n- [vsi](#ibm-cloud-vsi)\n- [transit_gateway](#ibm-cloud-transit_gateway)\n- [nfs_server](#ibm-cloud-nfs_server)\n- [serviceid](#serviceid)\n- [cos](#cos)\n\n### IBM Cloud `provider`\n\nDefines the provider that Terraform will use for managing the IBM Cloud assets.\n\n```\nprovider:\n- name: ibm\n  region: eu-de\n```\n\n#### Property explanation\n\n| Property | Description                  | Mandatory | Allowed values       |\n| -------- | ---------------------------- | --------- | -------------------- |\n| name     | Name of the provider cluster | Yes       | ibm                  |\n| region   | Region to connect to         | Yes       | Any IBM Cloud region |\n\n### IBM Cloud `resource_group`\n\nThe resource group is for cloud asset grouping purposes. You can define multiple resource groups in your IBM cloud account to group the provisioned assets. If you do not need to group your assets, choose `default`.\n\n```\nresource_group:\n- name: default\n```\n\n#### Property explanation\n\n| Property | Description                         | Mandatory | Allowed values |\n| -------- | ----------------------------------- | --------- | -------------- |\n| name     | Name of the existing resource group | Yes       |                |\n\n### IBM Cloud `ssh_keys`\n\nSSH keys to connect to VSIs. If you have Virtual Server Instances in your VPC, you will need an SSH key to connect to them. SSH keys defined here will be looked up in the vault and created if they don't exist already.\n\n```\nssh_keys:\n- name: vsi-access\n  managed: True\n```\n\n#### Property explanation\n\n| Property | Description                                                   | Mandatory | Allowed values        |\n| -------- | ------------------------------------------------------------- | --------- | --------------------- |\n| name     | Name of the SSH key in IBM Cloud                              | Yes       |                       |\n| managed  | Determines if the SSH key will be created if it doesn't exist | No        | true (default), false |\n\n### IBM Cloud `security_rule`\n\nDefines the services (or ports) which are allowed within the context of a VPC and/or VSI.\n\n```\nsecurity_rule:\n- name: https\n  tcp: {port_min: 443, port_max: 443}\n- name: ssh\n  tcp: {port_min: 22, port_max: 22}\n```\n\n#### Property explanation\n\n| Property | Description                                             | Mandatory      | Allowed values |\n| -------- | ------------------------------------------------------- | -------------- | -------------- |\n| name     | Name of the security rule                               | Yes            |                |\n| tcp      | Range of tcp ports (`port_min` and `port_max`) to allow | tcp and/or udp |                |\n| udp      | Range of udp ports (`port_min` and `port_max`) to allow | tcp and/or udp |                |\n\n### IBM Cloud `vpc`\n\nDefines the virtual private cloud which groups the provisioned objects (including VSIs and OpenShift cluster).\n\n```\nvpc:\n- name: sample\n  allow_inbound: ['ssh', 'https']\n```\n\n#### Property explanation\n\n| Property      | Description                                                                                                                                                              | Mandatory | Allowed values            |\n| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------- | ------------------------- |\n| name          | Name of the Virtual Private Cloud                                                                                                                                        | Yes       |                           |\n| managed       | Controls whether the VPC is managed. The default is `True`. Only set to `False` if the VPC is not managed but only referenced by other objects such as transit gateways. | No        | True (default), False     |\n| allow_inbound | Security rules which are allowed for inbound traffic                                                                                                                     | No        | Existing `security_rule`s |\n\n| Property      | Description                                          | Mandatory | Allowed values            |\n| ------------- | ---------------------------------------------------- | --------- | ------------------------- |\n| name          | Name of the Virtual Private Cloud                    | Yes       |                           |\n| allow_inbound | Security rules which are allowed for inbound traffic | No        | Existing `security_rule`s |\n\n### IBM Cloud `address_prefix`\n\nDefines the zones used within the VPC, along with the subnet the addresses will be issued for.\n\n```\n- name: sample-zone-1\n  vpc: sample\n  zone: eu-de-1\n  cidr: 10.27.0.0/26\n- name: sample-zone-2\n  vpc: sample\n  zone: eu-de-2\n  cidr: 10.27.0.64/26\n- name: sample-zone-3\n  vpc: sample\n  zone: eu-de-3\n  cidr: 10.27.0.128/26\n```\n\n#### Property explanation\n\n| Property | Description                                          | Mandatory     | Allowed values |\n| -------- | ---------------------------------------------------- | ------------- | -------------- |\n| name     | Name of the zone                                     | Yes           |                |\n| zone     | Zone in the IBM Cloud                                | Yes           |                |\n| cidr     | Address range that IPs in this zone will fall into   | Yes           |                |\n| vpc      | Virtual Private Cloud this address prefix belongs to | Yes, inferred |                |\n\n### IBM Cloud `subnet`\n\nDefines the subnet that Virtual Server Instances and ROKS compute nodes will be attached to.\n\n```\nsubnet:\n- name: sample-subnet-zone-1\n  address_prefix: sample-zone-1\n  ipv4_cidr_block: 10.27.0.0/26\n  zone: eu-de-1\n  vpc: sample\n  network_acl: sample-acl\n```\n\n#### Property explanation\n\n| Property        | Description                                          | Mandatory               | Allowed values            |\n| --------------- | ---------------------------------------------------- | ----------------------- | ------------------------- |\n| name            | Name of the subnet                                   | Yes                     |                           |\n| address_prefix  | Zone this subnet belongs to                          | Yes                     | Existing zone             |\n| ipv4_cidr_block | Address range that IPs in this subnet will fall into | Yes                     | Range of subrange of zone |\n| zone            | Zone of the address prefix definition                | Yes, inferred           |                           |\n| vpc             | Virtual Private Cloud this subnet prefix belongs to  | Yes, inferred from zone |                           |\n| network_acl     | Reference to the network access control list protecting this subnet | No       |                           |\n\n### IBM Cloud `network_acl`\n\nDefines the network access control list to be associated with subnets to allow or deny traffic from or to external connections. The rules are processed in sequence per direction. Rules that appear higher in the list will be processed first.\n\n```\nnetwork_acl:\n- name: {{ env_id }}-acl\n  vpc_name: {{ env_id }}\n  rules:\n  - name: inbound-ssh\n    action: allow               # Can be allow or deny\n    source: \"0.0.0.0/0\"\n    destination: \"0.0.0.0/0\"\n    direction: inbound\n    tcp:\n      source_port_min: 1        # optional\n      source_port_max: 65535    # optional\n      dest_port_min: 22         # optional\n      dest_port_max: 22         # optional\n  - name: output-udp\n    action: deny                # Can be allow or deny\n    source: \"0.0.0.0/0\"\n    destination: \"0.0.0.0/0\"\n    direction: outbound\n    udp:\n      source_port_min: 1        # optional\n      source_port_max: 65535    # optional\n      dest_port_min: 1000       # optional\n      dest_port_max: 2000       # optional\n  - name: output-icmp\n    action: allow               # Can be allow or deny\n    source: \"0.0.0.0/0\"\n    destination: \"0.0.0.0/0\"\n    direction: outbound\n    icmp:\n      code: 1\n      type: 1\n```\n\n#### Property explanation\n\n| Property        | Description                                          | Mandatory               | Allowed values            |\n| --------------- | ---------------------------------------------------- | ----------------------- | ------------------------- |\n| name            | Name of the network access control liet              | Yes                     |                           |\n| vpc_name        | Virtual Private Cloud this network ACL belongs to    | Yes                     |                           |\n| rules           | Rules to be applied, every rule is an entry in the list | Yes                  |                           |\n| rules.name      | Unique name of the rule                              | Yes                     |                           |\n| rules.action    | Defines whether the traffic is allowed or denied     | Yes                     | allow, deny               |\n| rules.source    | Source address range that defines the rule           | Yes                     |                           |\n| rules.destination | Destination address range that defines the rule    | Yes                     |                           |\n| rules.direction | Inbound or outbound direction of the traffic         | Yes                     | inbound, outbound         |\n| rules.tcp       | Rule for TCP traffic                                 | No                      |                           |\n| rules.tcp.source_port_min | Low value of the source port range         | No, default=1           | 1-65535                   |\n| rules.tcp.source_port_max | High value of the source port range        | No, default=65535       | 1-65535                   |\n| rules.tcp.dest_port_min   | Low value of the destination port range    | No, default=1           | 1-65535                   |\n| rules.tcp.source_port_max | High value of the destination port range   | No, default=65535       | 1-65535                   |\n| rules.udp       | Rule for UDP traffic                                 | No                      |                           |\n| rules.udp.source_port_min | Low value of the source port range         | No, default=1           | 1-65535                   |\n| rules.udp.source_port_max | High value of the source port range        | No, default=65535       | 1-65535                   |\n| rules.udp.dest_port_min   | Low value of the destination port range    | No, default=1           | 1-65535                   |\n| rules.udp.source_port_max | High value of the destination port range   | No, default=65535       | 1-65535                   |\n| rules.icmp      | Rule for ICMP traffic                                | No                      |                           |\n| rules.icmp.code | ICMP traffic code                                    | No, default=all         | 0-255                     |\n| rules.icmp.type | ICMP traffic type                                    | No, default=all         | 0-254                     |\n\n\n### IBM Cloud `vsi`\n\nDefines a Virtual Server Instance within the VPC.\n\n```\nvsi:\n- name: sample-bastion\n  infrastructure:\n    keys:\n    - \"vsi-access\"\n    image: ibm-redhat-8-3-minimal-amd64-3\n    subnet: sample-subnet-zone-1\n    primary_ipv4_address: 10.27.0.4\n    public_ip: True\n    vpc_name: sample\n    zone: eu-de-3\n```\n\n#### Property explanation\n\n| Property                            | Description                                               | Mandatory                 | Allowed values                              |\n| ----------------------------------- | --------------------------------------------------------- | ------------------------- | ------------------------------------------- |\n| name                                | Name of the Virtual Server Instance                       | Yes                       |                                             |\n| infrastructure                      | Infrastructure attributes                                 | Yes                       |                                             |\n| infrastructure.allow_ip_spoofing    | Decide if IP spoofing is allowed for the interface or not | No                        | False (default), True                       |\n| infrastructure.keys                 | List of SSH keys to attach to the VSI                     | Yes                       | Existing `ssh_key`                          |\n| infrastructure.image                | Operating system image to be used                         | Yes                       | Existing image in IBM Cloud                 |\n| infrastructure.subnet               | Subnet the VSI will be connected to                       | Yes                       | Existing `subnet`                           |\n| infrastructure.primary_ipv4_address | IP v4 address that will be assigned to the VSI            | No                        | If specified, address in the `subnet` range |\n| infrastructure.public_ip            | Must a public IP address be attached to this VSI?         | No                        | False (default), True                       |\n| infrastructure.vpc_name             | Virtual Private Cloud this VSI belongs to                 | Yes, inferred from subnet |                                             |\n| infrastructure.zone                 | Zone the VSI will be plaed into                           | Yes, inferred from subnet |                                             |\n\n### IBM Cloud `transit_gateway`\n\nConnects one or more VPCs to each other.\n\n```\ntransit_gateway:\n- name: sample-tgw\n  location: eu-de\n  connections:\n  - vpc: other-vpc\n  - vpc: sample\n```\n\n#### Property explanation\n\n| Property       | Description                                                                                                                                                                                                                            | Mandatory | Allowed values |\n| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | -------------- |\n| name           | Name of the transit gateway                                                                                                                                                                                                            | Yes       |                |\n| location       | IBM Cloud location of the transit gateway                                                                                                                                                                                              | Yes       |                |\n| connections    | Defines which VPCs must be included in the transit gateway                                                                                                                                                                             | Yes       |                |\n| connection.vpc | Defines the VPC to include. Every VPC must exist in the configuration, even if not managed by this configuration. When referencing an existing VPC, make sure that there is a `vpc` object of that name with `managed` set to `False`. | Yes       | Existing `vpc` |\n\n### IBM Cloud `nfs_server`\n\nDefines a Virtual Server Instance within the VPC that will be used as an NFS server.\n\n```\nnfs_server:\n- name: sample-nfs\n  infrastructure:\n    type: vpc\n    vpc_name: sample\n    subnet: sample-subnet-zone-1\n    zone: eu-de-1\n    primary_ipv4_address: 10.27.0.5\n    image: ibm-redhat-8-3-minimal-amd64-3\n    profile: cx2-2x4\n    bastion_host: sample-bastion\n    storage_folder: /data/nfs\n    storage_profile: 10iops-tier\n    keys:\n      - \"sample-nfs-provision\"\n```\n\n#### Property explanation\n\n| Property                            | Description                                                                 | Mandatory                 | Allowed values                              |\n|-------------------------------------|-----------------------------------------------------------------------------|---------------------------|---------------------------------------------|\n| name                                | Name of the Virtual Server Instance                                         | Yes                       |                                             |\n| infrastructure                      | Infrastructure attributes                                                   | Yes                       |                                             |\n| infrastructure.image                | Operating system image to be used                                           | Yes                       | Existing image in IBM Cloud                 |\n| infrastructure.profile              | Server profile to be used, for example cx2-2x4                              | Yes                       | Existing profile in IBM Cloud               |\n| infrastructure.type                 | Type of infrastructure for NFS servers to                                   | Yes     | vpc                                         |\n| infrastructure.vpc_name             | Virtual Private Cloud this VSI belongs to                                   | Yes, inferred from subnet |                                             |\n| infrastructure.subnet               | Subnet the VSI will be connected to                                         | Yes                       | Existing `subnet`                           |\n| infrastructure.zone                 | Zone the VSI will be plaed into                                             | Yes, inferred from subnet |                                             |\n| infrastructure.primary_ipv4_address | IP v4 address that will be assigned to the VSI                              | No                        | If specified, address in the `subnet` range |\n| infrastructure.bastion_host         | Specify the VSI of the bastion to reach this NFS server                     | No                        |                                             |\n| infrastructure.storage_profile      | Storage profile that will be used                                           | Yes                       | 3iops-tier, 5iops-tier, 10iops-tier         |\n| infrastructure.volume_size_gb       | Size of the NFS server data volume                                          | Yes                       |                                             |\n| infrastructure.storage_folder       | Folder that holds the data, this will be mounted from the NFS storage class | Yes                       |                                             |\n| infrastructure.keys                 | List of SSH keys to attach to the NFS server VSI                            | Yes                       | Existing `ssh_key`                          |\n| infrastructure.allow_ip_spoofing    | Decide if IP spoofing is allowed for the interface or not                   | No                        | False (default), True                       |\n\n### IBM Cloud `cos`\n\nDefines a IBM Cloud Cloud Object Storage instance and allows to create buckets.\n\n```\ncos:\n- name: {{ env_id }}-cos\n  plan: standard\n  location: global\n  serviceids:\n  - name: {{ env_id }}-cos-serviceid\n    roles: [\"Manager\", \"Viewer\", \"Administrator\"]\n  buckets:\n  - name: bucketone6c9d6840\n    cross_region_location: eu\n```\n\n#### Property explanation\n\n| Property                        | Description                                                                                           | Mandatory                                    | Allowed values                                                                                       |\n| ------------------------------- | ----------------------------------------------------------------------------------------------------- | -------------------------------------------- | ---------------------------------------------------------------------------------------------------- |\n| name                            | Name of the serviceid                                                                                 | Yes                                          |                                                                                                      |\n| plan                            | short description of the serviceid                                                                    | Yes                                          |                                                                                                      |\n| location                        | collection of servicekeys that should be created for the parent serviceid                             | Yes                                          |                                                                                                      |\n| serviceids                      | Collection of references to defined seriveids                                                         | No                                           |                                                                                                      |\n| serviceids.name                 | Name of the serviceid                                                                                 | Yes                                          |                                                                                                      |\n| serviceids.roles                | An array of strings to define which role should be granted to the serviceid                           | Yes                                          |                                                                                                      |\n| buckets                         | Collection of buckets that should be created inside the cos instance                                  | No                                           |                                                                                                      |\n| buckets[].name                  | Collection of buckets that should be created inside the cos instance                                  | No                                           |                                                                                                      |\n| buckets[].storage_class         | No                                                                                                    | standard (default), vault, cold, flex, smart |\n| buckets[].endpoint_type         | No                                                                                                    | public (default), private                    |\n| buckets[].cross_region_location | If you use this parameter, do not set single_site_location or region_location at the same time.       | Yes (one of)                                 | us, eu, ap                                                                                           |\n| buckets[].region_location       | If you set this parameter, do not set single_site_location or cross_region_location at the same time. | Yes (one of)                                 | au-syd, eu-de, eu-gb, jp-tok, us-east, us-south, ca-tor, jp-osa, br-sao                              |\n| buckets[].single_site_location  | If you set this parameter, do not set region_location or cross_region_location at the same time.      | Yes (one of)                                 | ams03, che01, hkg02, mel01, mex01, mil01, mon01, osl01, par01, sjc04, sao01, seo01, sng01, and tor01 |\n\n\n## Microsoft Azure\n\nFor Microsoft Azure, the following object type is supported:\n\n- [azure_aro](#azure-aro)\n\n### Azure ARO\n\nDefines an infrastructure configuration onto which OpenShift will be provisioned.\n\n```\nazure_aro:\n- name: sample\n  resource_group:\n    name: sample\n    location: westeurope\n  vnet:\n    name: vnet\n    address_space: 10.0.0.0/22\n  control_plane:\n    subnet:\n      name: control-plane-subnet\n      address_prefixes: 10.0.0.0/23\n    vm:\n      size: Standard_D8s_v3\n  compute:\n    subnet:\n      name: compute-subnet\n      address_prefixes: 10.0.2.0/23\n    vm:\n      size: Standard_D16s_v3\n      disk_size_gb: 128\n      count: 3\n```\n\n#### Properties explanation\n\n| Property                              | Description                                                                              | Mandatory | Allowed values                                                                                                                                               |\n| ------------------------------------- | ---------------------------------------------------------------------------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| name                                  | Name of the `azure_aro` definition object, will be referenced by `openshift`             | Yes       |                                                                                                                                                              |\n| resource_group                        | Resource group attributes                                                                | Yes       |                                                                                                                                                              |\n| resource_group.name                   | Name of the resource group (will be provisioned)                                         | Yes       | unique value, it must not exist                                                                                                                              |\n| resource_group.location               | Azure location                                                                           | Yes       | to pick a different location, run: `az account list-locations -o table`                                                                                      |\n| vnet                                  | Virtual network attributes                                                               | Yes       |                                                                                                                                                              |\n| vnet.name                             | Name of the virtual network                                                              | Yes       |                                                                                                                                                              |\n| vnet.address_space                    | Address space of the virtual network                                                     | Yes       |                                                                                                                                                              |\n| control_plane                         | Control plane (master) nodes attributes                                                  | Yes       |                                                                                                                                                              |\n| control_plane.subnet                  | Control plane nodes subnet attributes                                                    | Yes       |                                                                                                                                                              |\n| control_plane.subnet.name             | Name of the control plane nodes subnet                                                   | Yes       |                                                                                                                                                              |\n| control_plane.subnet.address_prefixes | Address prefixes of the control plane nodes subnet (divided by a `,` comma, if relevant) | Yes       |                                                                                                                                                              |\n| control_plane.vm                      | Control plane nodes virtual machine attributes                                           | Yes       |                                                                                                                                                              |\n| control_plane.vm.size                 | Virtual machine size (aka flavour) of the control plane nodes                            | Yes       | `Standard_D8s_v3`, `Standard_D16s_v3`, `Standard_D32s_v3`                                                                                                    |\n| compute                               | Compute (worker) nodes attributes                                                        | Yes       |                                                                                                                                                              |\n| compute.subnet                        | Compute nodes subnet attributes                                                          | Yes       |                                                                                                                                                              |\n| compute.subnet.name                   | Name of the compute nodes subnet                                                         | Yes       |                                                                                                                                                              |\n| compute.subnet.address_prefixes       | Address prefixes of the compute nodes subnet (divided by a `,` comma, if relevant)       | Yes       |                                                                                                                                                              |\n| compute.vm                            | Compute nodes virtual machine attributes                                                 | Yes       |                                                                                                                                                              |\n| compute.vm.size                       | Virtual machine size (aka flavour) of the compute nodes                                  | Yes       | See the full list of [supported virtual machine sizes](https://docs.microsoft.com/en-us/azure/openshift/support-policies-v4#supported-virtual-machine-sizes) |\n| compute.vm.disk_size_gb               | Disk size in GBs of the compute nodes virtual machine                                    | Yes       | minimum value is 128                                                                                                                                         |\n| compute.vm.count                      | Number of compute nodes virtual machines                                                 | Yes       | minimum value is 3                                                                                                                                           |\n\n### `serviceid`\n\nDefines a iam_service_id that can be granted several role based accesss right via attaching iam_policies to it.\n\n```\nserviceid:\n- name: sample-serviceid\n  description: to access ibmcloud services from external\n  servicekeys:\n  - name: primarykey\n```\n\n#### Property explanation\n\n| Property         | Description                                                               | Mandatory | Allowed values |\n| ---------------- | ------------------------------------------------------------------------- | --------- | -------------- |\n| name             | Name of the serviceid                                                     | Yes       |                |\n| description      | short description of the serviceid                                        | No        |                |\n| servicekeys      | collection of servicekeys that should be created for the parent serviceid | No        |                |\n| servicekeys.name | Name of the servicekey                                                    | Yes       |                |\n\n## vSphere\n\nFor vSphere, the following object types are supported:\n\n- [vsphere](#vsphere-vsphere)\n- [vm_definition](#vsphere-vm_definition)\n- [nfs_server](#vsphere-nfs_server)\n\n### vSphere `vsphere`\n\nDefines the vSphere vCenter onto which OpenShift will be provisioned.\n\n```\nvsphere:\n- name: sample\n  vcenter: 10.99.92.13\n  datacenter: Datacenter1\n  datastore: Datastore1\n  cluster: Cluster1\n  network: \"VM Network\"\n  folder: /Datacenter1/vm/sample\n```\n\n#### Property explanation\n\n| Property      | Description                                                                 | Mandatory | Allowed values |\n| ------------- | --------------------------------------------------------------------------- | --------- | -------------- |\n| name          | Name of the vSphere definition, will be referenced by `openshift`           | Yes       |                |\n| vcenter       | Host or IP address of the vSphere Center                                    | Yes       |                |\n| datacenter    | vSphere Data Center to be used for the virtual machines                     | Yes       |                |\n| datastore     | vSphere Datastore to be used for the virtual machines                       | Yes       |                |\n| cluster       | vSphere cluster to be used for the virtual machines                         | Yes       |                |\n| network       | vSphere network to be used for the virtual machines                         | Yes       |                |\n| folder        | Fully qualified folder name into which the OpenShift cluster will be placed | Yes       |                |\n\n### vSphere `vm_definition`\n\nDefines the virtual machine properties to be used for the control-plane nodes and compute nodes.\n\n```\nvm_definition:\n- name: control-plane\n  vcpu: 8\n  memory_mb: 32768\n  boot_disk_size_gb: 100\n- name: compute\n  vcpu: 16\n  memory_mb: 65536\n  boot_disk_size_gb: 200\n  # Optional overrides for vsphere properties\n  # datastore: Datastore1\n  # network: \"VM Network\"\n```\n\n#### Property explanation\n\n| Property          | Description                                                  | Mandatory | Allowed values |\n| ----------------- | ------------------------------------------------------------ | --------- | -------------- |\n| name              | Name of the VM definition, will be referenced by `openshift` | Yes       |                |\n| vcpu              | Number of virtual CPUs to be assigned to the VMs             | Yes       |                |\n| memory_mb         | Amount of memory in MiB of the virtual machines              | Yes       |                |\n| boot_disk_size_gb | Size of the virtual machine boot disk in GiB                 | Yes       |                |\n| datastore         | vSphere Datastore to be used for the virtual machines, overrides `vsphere.datastore` |  No       |  |\n| network           | vSphere network to be used for the virtual machines, overrides `vsphere.network`      | No       |  |\n\n### vSphere `nfs_server`\n\nDefines an existing NFS server that will be used for the OpenShift NFS storage class.\n\n```\nnfs_server:\n- name: sample-nfs\n  infrastructure:\n    host_ip: 10.99.92.31\n    storage_folder: /data/nfs\n```\n\n#### Property explanation\n\n| Property                      | Description                                                                 | Mandatory | Allowed values |\n| ----------------------------- | --------------------------------------------------------------------------- | --------- | -------------- |\n| name                          | Name of the NFS server                                                      | Yes       |                |\n| infrastructure                | Infrastructure attributes                                                   | Yes       |                |\n| infrastructure.host_ip        | Host or IP address of the NFS server                                        | Yes       |                |\n| infrastructure.storage_folder | Folder that holds the data, this will be mounted from the NFS storage class | Yes       |                |\n","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/cpd-design/objects/infrastructure.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}