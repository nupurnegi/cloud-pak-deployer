{"componentChunkName":"component---src-pages-cpd-design-process-cp-4-d-cartridges-cognos-authorization-md","path":"/cpd-design/process/cp4d-cartridges/cognos-authorization/","result":{"pageContext":{"frontmatter":{"description":"Cpd Design / Process / Cp 4 D Cartridges / Cognos Authorization","title":"Cpd Design / Process / Cp 4 D Cartridges / Cognos Authorization"},"relativePagePath":"/cpd-design/process/cp4d-cartridges/cognos-authorization.md","titleType":"page","MdxNode":{"id":"95df78aa-2936-5cde-b254-b9ecf033ecd8","children":[],"parent":"2eefb3d0-ace2-52b2-a9d2-8af2f0b88e2f","internal":{"content":"# Automated Cognos Authorization using LDAP groups\n\n![Authorization Overview](/images/cognos_authorization.png)\n\n## Description\nThe automated cognos authorization capability uses LDAP groups to assign users to a Cognos Analytics Role, which allows these users to login to IBM Cloud Pak for Data and access the Cognos Analytics instance. This capability will perform the following tasks:\n- Create a User Group and assign the associated LDAP Group(s) and Cloud Pak for Data role(s)\n- For each member of the LDAP Group(s) part of the User Group, create the user as a Cloud Pak for Data User and assigned the Cloud Pak for Data role(s)\n- For each member of the LDAP Group(s) part of the User Group, assign membership to the Cognos Analytics instance and authorize for the Cognos Analytics Role\n\nIf the User Group is already present, validate all LDAP Group(s) are associated with the User Group. Add the LDAP Group(s) not yet assiciated to the User Group. Existing LDAP groups will not be removed from the User Group\n\nIf a User is already present in Cloud Pak for Data, it will not be updated.\n\nIf a user is already associated with the Cognos Analytics instance, keep its original membership and do not update the membership\n\n## Pre-requisites\nPrior to running the script, ensure:\n- LDAP configuration in IBM Cloud Pak for Data is completed and validated\n- Cognos Analytics instance is provisioned and running in IBM Cloud Pak for Data\n- The role(s) that will be associated with the User Group are present in IBM Cloud Pak for Data\n\n## Usage of the Script\nThe script is available in [automation-roles/50-install-cloud-pak/cp4d-service/files/assign_CA_authorization.sh](/automation-roles/50-install-cloud-pak/cp4d-service/files/assign_CA_authorization.sh).\n\nRun the script without arguments to show its usage help.\n```\n# ./assign_CA_authorization.sh                                                                               \nUsage:\n\nassign_CA_authorization.sh\n  <CLOUD_PAK_FOR_DATA_URL>\n  <CLOUD_PAK_FOR_DATA_LOGIN_USER>\n  <CLOUD_PAK_FOR_DATA_LOGIN_PASSWORD>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_NAME>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_DESCRIPTION>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_ROLES_ASSIGNMENT>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_LDAP_GROUPS_MAPPING>\n  <CLOUD_PAK_FOR_DATA_COGNOS_ANALYTICS_ROLE>\n```\n\n- **<CLOUD_PAK_FOR_DATA_URL>**  The URL to the IBM Cloud Pak for Data instance\n- **<CLOUD_PAK_FOR_DATA_LOGIN_USER>** The login user to IBM Cloud Pak for Data, e.g. the admin user\n- **<CLOUD_PAK_FOR_DATA_LOGIN_PASSWORD>** The login password to IBM Cloud Pak for Data\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_NAME>** The Cloud Pak for Data User Group Name\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_DESCRIPTION>** The Cloud Pak for Data User Group Description\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_ROLES_ASSIGNMENT>** The Cloud Pak for Data roles associated to the User Group. Use a ; seperated list to assign multiple roles\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_LDAP_GROUPS_MAPPING>** The LDAP Groups associated to the User Group. Use a ; seperated list to assign LDAP groups\n- **<CLOUD_PAK_FOR_DATA_COGNOS_ANALYTICS_ROLE>** The Cognos Analytics Role each member of the User Group will be associated with, which must be one of:\n  - Analytics Administrators\n  - Analytics Explorers\n  - Analytics Users\n  - Analytics Viewer\n\n## Running the script\n\nUsing the command example provided by the `./assign_CA_authorization.sh` command, run the script with its arguments\n```\n# ./assign_CA_authorization.sh \\\n  https://...... \\\n  admin \\\n  ******** \\\n  \"Cognos User Group\" \\\n  \"Cognos User Group Description\" \\\n  \"wkc_data_scientist_role;zen_administrator_role\" \\\n  \"cn=ca_group,ou=groups,dc=ibm,dc=com\" \\\n  \"Analytics Viewer\"\n```\nThe script execution will run through the following tasks:\n\n**Validation**  \nConfirm all required arguments are provided.  \nConfirm at least 1 User Group Role assignment is provided.  \nConfirm at least 1 LDAP Group is provided.\n\n**Login to Cloud Pak for Data and generate a Bearer token**  \nUsing the provided IBM Cloud for Data URL, username and password, login to Cloud pak for Data and generate the Bearer token used for subsequent commands. Exit with an error if the login to IBM Cloud Pak for Data fails. \n\n**Confirm the provided User Group role(s) are present in Cloud Pak for Data**  \nAcquire all Cloud Pak for Data roles and confirm the provided User Group role(s) are one of the existing Cloud Pak for Data roles. Exit with an error if a role is provided which is not currently present in IBM Cloud Pak for Data.\n\n**Confirm the provided Cognos Analytics role is valid**  \nEnsure the provided Cognos Analytics role is one of the available Cognos Analytics roles. Exit with an error if a Cognos Analytics role is provided that does not match with the available Cognos Analytics roles.\n\n**Confirm LDAP is configured in IBM Cloud Pak for Data**  \nEnsures the LDAP configuration is completed. Exit with an error if there is no current LDAP configuration.\n\n**Confirm the provided LDAP groups are present in the LDAP User Registry**  \nUsing IBM Cloud Pak for Data, query whether the provided LDAP groups are present in the LDAP User registry. Exit with an error if a LDAP Group is not available.\n\n**Confirm if the IBM Cloud Pak for Data User Group exists**  \nQueries the IBM Cloud Pak for Data User Groups. If the provided User Group exists, acquire the Group ID. \n\n**If the IBM Cloud Pak for Data User Group does not exist, create it**  \nIf the User Group does not exist, create it, and assign the IBM Cloud Pak for Data Roles and LDAP Groups to the new User Group\n\n**If the IBM Cloud Pak for Data User Group does exist, validate the associated LDAP Groups**  \nIf the User Group already exists, confirm all provided LDAP groups are associated with the User Group. Add LDAP groups that are not yet associated.\n\n**Get the Cognos Analytics instance ID**  \nQueries the IBM Cloud Pak for Data service instances and acquires the Cognos Analytics instance ID. Exit with an error if no Cognos Analytics instance is available\n\n**Ensure each user member of the IBM Cloud Pak for Data User Group is an existing user**  \nEach user that is member of the provided LDAP groups, ensure this member is an IBM Cloud Pak for Data User. Create a new user with the provided User Group role(s) if the the user is not yet available. Any existing User(s) will not be updated. If Users are removed from an LDAP Group, these users will not be removed from Cloud Pak for Data. \n\n**Ensure each user member of the IBM Cloud Pak for Data User Group is associated to the Cognos Analytics instance**  \nEach user that is member of the provided LDAP groups, ensure this member is associated to the Cognos Analytics instance with the provided Cognos Analytics role. Any user that is already associated to the Cognos Analytics instance will have its Cognos Analytics role updated to the provided Cognos Analytics Role","type":"Mdx","contentDigest":"87cc10208c4dfd23741e58c58515633d","owner":"gatsby-plugin-mdx","counter":267},"frontmatter":{"description":"Cpd Design / Process / Cp 4 D Cartridges / Cognos Authorization","title":"Cpd Design / Process / Cp 4 D Cartridges / Cognos Authorization"},"exports":{},"rawBody":"# Automated Cognos Authorization using LDAP groups\n\n![Authorization Overview](/images/cognos_authorization.png)\n\n## Description\nThe automated cognos authorization capability uses LDAP groups to assign users to a Cognos Analytics Role, which allows these users to login to IBM Cloud Pak for Data and access the Cognos Analytics instance. This capability will perform the following tasks:\n- Create a User Group and assign the associated LDAP Group(s) and Cloud Pak for Data role(s)\n- For each member of the LDAP Group(s) part of the User Group, create the user as a Cloud Pak for Data User and assigned the Cloud Pak for Data role(s)\n- For each member of the LDAP Group(s) part of the User Group, assign membership to the Cognos Analytics instance and authorize for the Cognos Analytics Role\n\nIf the User Group is already present, validate all LDAP Group(s) are associated with the User Group. Add the LDAP Group(s) not yet assiciated to the User Group. Existing LDAP groups will not be removed from the User Group\n\nIf a User is already present in Cloud Pak for Data, it will not be updated.\n\nIf a user is already associated with the Cognos Analytics instance, keep its original membership and do not update the membership\n\n## Pre-requisites\nPrior to running the script, ensure:\n- LDAP configuration in IBM Cloud Pak for Data is completed and validated\n- Cognos Analytics instance is provisioned and running in IBM Cloud Pak for Data\n- The role(s) that will be associated with the User Group are present in IBM Cloud Pak for Data\n\n## Usage of the Script\nThe script is available in [automation-roles/50-install-cloud-pak/cp4d-service/files/assign_CA_authorization.sh](/automation-roles/50-install-cloud-pak/cp4d-service/files/assign_CA_authorization.sh).\n\nRun the script without arguments to show its usage help.\n```\n# ./assign_CA_authorization.sh                                                                               \nUsage:\n\nassign_CA_authorization.sh\n  <CLOUD_PAK_FOR_DATA_URL>\n  <CLOUD_PAK_FOR_DATA_LOGIN_USER>\n  <CLOUD_PAK_FOR_DATA_LOGIN_PASSWORD>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_NAME>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_DESCRIPTION>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_ROLES_ASSIGNMENT>\n  <CLOUD_PAK_FOR_DATA_USER_GROUP_LDAP_GROUPS_MAPPING>\n  <CLOUD_PAK_FOR_DATA_COGNOS_ANALYTICS_ROLE>\n```\n\n- **<CLOUD_PAK_FOR_DATA_URL>**  The URL to the IBM Cloud Pak for Data instance\n- **<CLOUD_PAK_FOR_DATA_LOGIN_USER>** The login user to IBM Cloud Pak for Data, e.g. the admin user\n- **<CLOUD_PAK_FOR_DATA_LOGIN_PASSWORD>** The login password to IBM Cloud Pak for Data\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_NAME>** The Cloud Pak for Data User Group Name\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_DESCRIPTION>** The Cloud Pak for Data User Group Description\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_ROLES_ASSIGNMENT>** The Cloud Pak for Data roles associated to the User Group. Use a ; seperated list to assign multiple roles\n- **<CLOUD_PAK_FOR_DATA_USER_GROUP_LDAP_GROUPS_MAPPING>** The LDAP Groups associated to the User Group. Use a ; seperated list to assign LDAP groups\n- **<CLOUD_PAK_FOR_DATA_COGNOS_ANALYTICS_ROLE>** The Cognos Analytics Role each member of the User Group will be associated with, which must be one of:\n  - Analytics Administrators\n  - Analytics Explorers\n  - Analytics Users\n  - Analytics Viewer\n\n## Running the script\n\nUsing the command example provided by the `./assign_CA_authorization.sh` command, run the script with its arguments\n```\n# ./assign_CA_authorization.sh \\\n  https://...... \\\n  admin \\\n  ******** \\\n  \"Cognos User Group\" \\\n  \"Cognos User Group Description\" \\\n  \"wkc_data_scientist_role;zen_administrator_role\" \\\n  \"cn=ca_group,ou=groups,dc=ibm,dc=com\" \\\n  \"Analytics Viewer\"\n```\nThe script execution will run through the following tasks:\n\n**Validation**  \nConfirm all required arguments are provided.  \nConfirm at least 1 User Group Role assignment is provided.  \nConfirm at least 1 LDAP Group is provided.\n\n**Login to Cloud Pak for Data and generate a Bearer token**  \nUsing the provided IBM Cloud for Data URL, username and password, login to Cloud pak for Data and generate the Bearer token used for subsequent commands. Exit with an error if the login to IBM Cloud Pak for Data fails. \n\n**Confirm the provided User Group role(s) are present in Cloud Pak for Data**  \nAcquire all Cloud Pak for Data roles and confirm the provided User Group role(s) are one of the existing Cloud Pak for Data roles. Exit with an error if a role is provided which is not currently present in IBM Cloud Pak for Data.\n\n**Confirm the provided Cognos Analytics role is valid**  \nEnsure the provided Cognos Analytics role is one of the available Cognos Analytics roles. Exit with an error if a Cognos Analytics role is provided that does not match with the available Cognos Analytics roles.\n\n**Confirm LDAP is configured in IBM Cloud Pak for Data**  \nEnsures the LDAP configuration is completed. Exit with an error if there is no current LDAP configuration.\n\n**Confirm the provided LDAP groups are present in the LDAP User Registry**  \nUsing IBM Cloud Pak for Data, query whether the provided LDAP groups are present in the LDAP User registry. Exit with an error if a LDAP Group is not available.\n\n**Confirm if the IBM Cloud Pak for Data User Group exists**  \nQueries the IBM Cloud Pak for Data User Groups. If the provided User Group exists, acquire the Group ID. \n\n**If the IBM Cloud Pak for Data User Group does not exist, create it**  \nIf the User Group does not exist, create it, and assign the IBM Cloud Pak for Data Roles and LDAP Groups to the new User Group\n\n**If the IBM Cloud Pak for Data User Group does exist, validate the associated LDAP Groups**  \nIf the User Group already exists, confirm all provided LDAP groups are associated with the User Group. Add LDAP groups that are not yet associated.\n\n**Get the Cognos Analytics instance ID**  \nQueries the IBM Cloud Pak for Data service instances and acquires the Cognos Analytics instance ID. Exit with an error if no Cognos Analytics instance is available\n\n**Ensure each user member of the IBM Cloud Pak for Data User Group is an existing user**  \nEach user that is member of the provided LDAP groups, ensure this member is an IBM Cloud Pak for Data User. Create a new user with the provided User Group role(s) if the the user is not yet available. Any existing User(s) will not be updated. If Users are removed from an LDAP Group, these users will not be removed from Cloud Pak for Data. \n\n**Ensure each user member of the IBM Cloud Pak for Data User Group is associated to the Cognos Analytics instance**  \nEach user that is member of the provided LDAP groups, ensure this member is associated to the Cognos Analytics instance with the provided Cognos Analytics role. Any user that is already associated to the Cognos Analytics instance will have its Cognos Analytics role updated to the provided Cognos Analytics Role","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/cpd-design/process/cp4d-cartridges/cognos-authorization.md"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}