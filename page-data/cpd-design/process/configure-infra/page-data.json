{"componentChunkName":"component---src-pages-cpd-design-process-configure-infra-mdx","path":"/cpd-design/process/configure-infra/","result":{"pageContext":{"frontmatter":{"title":"Configure infrastructure","tabs":["Overview","Validate","Prepare","Provision-infra","Configure-infra","Install-cloud-pak","Configure-cloud-pak","Deploy-assets","Smoke-tests"]},"relativePagePath":"/cpd-design/process/configure-infra.mdx","titleType":"page","MdxNode":{"id":"bade4385-59ac-5342-9ff8-5eb789b81b19","children":[],"parent":"7fb49a63-e3b8-5f74-8be9-e8f88f7228ef","internal":{"content":"---\ntitle: Configure infrastructure\ntabs: ['Overview', 'Validate', 'Prepare', 'Provision-infra', 'Configure-infra', 'Install-cloud-pak', 'Configure-cloud-pak', 'Deploy-assets', 'Smoke-tests']\n---\n\n# Configure infrastructure\n\nThis stage focuses on the configuration of the provisioned infrastructure.\n\n## Configure infrastructure for IBM Cloud\n\n### Configure the VPC bastion server(s)\nIn a configuration scenario where NFS is used for OpenShift storage, the NFS server must be provisioned as a VSI within the VPC that contains the OpenShift cluster. It is best practice to shield off the NFS server from the outside world by using a jump host (bastion) to access it.\n\nThis steps configures the bastion host which has a public IP address to serve as a jump host to access other servers and services within the VPC.\n\n### Configure the VPC NFS server(s)\nConfigures the NFS server using the specs in the `nfs_server` configuration object(s). It installs the required packages and sets up the NFSv4 service. Additionally, it will format the empty volume as `xfs` and export it so it can be used by the `managed-nfs-storage` storage class in the OpenShift cluster.\n\n### Configure the OpenShift storage classes\nThis steps takes care of configuring the storage classes in the OpenShift cluster. Storage classes are an abstraction of the underlying physical and virtual storage. When run, it processes the `openshift_storage` elements within the current `openshift` configuration object.\n\nTwo types of storage classes can be automatically created and configured:\n\n#### NFS Storage\nCreates the `managed-nfs-storage` OpenShift storage class using the specified `nfs_server_name` which references an `nfs_server` configuration object.\n\n#### OCS Storage\nActivates the ROKS cluster's OpenShift Container Storage add-on to install the operator into the cluster. Once finished with the preparation, the `OcsCluster` OpenShift object is created to provision the storage cluster. As the backing storage the `ibmc-vpc-block-metro-10iops-tier` storage class is used, which has the appropriate IO characteristics for the Cloud Paks.\n\n<InlineNotification>\nBoth NFS and OCS storage classes can be created but only 1 storage class of each type can exist in the cluster at the moment. If more than one storage class of the same type is specified, the configuration will fail.\n</InlineNotification>","type":"Mdx","contentDigest":"277fc3396b0eba701ab29e0b2b80563d","owner":"gatsby-plugin-mdx","counter":237},"frontmatter":{"title":"Configure infrastructure","tabs":["Overview","Validate","Prepare","Provision-infra","Configure-infra","Install-cloud-pak","Configure-cloud-pak","Deploy-assets","Smoke-tests"]},"exports":{},"rawBody":"---\ntitle: Configure infrastructure\ntabs: ['Overview', 'Validate', 'Prepare', 'Provision-infra', 'Configure-infra', 'Install-cloud-pak', 'Configure-cloud-pak', 'Deploy-assets', 'Smoke-tests']\n---\n\n# Configure infrastructure\n\nThis stage focuses on the configuration of the provisioned infrastructure.\n\n## Configure infrastructure for IBM Cloud\n\n### Configure the VPC bastion server(s)\nIn a configuration scenario where NFS is used for OpenShift storage, the NFS server must be provisioned as a VSI within the VPC that contains the OpenShift cluster. It is best practice to shield off the NFS server from the outside world by using a jump host (bastion) to access it.\n\nThis steps configures the bastion host which has a public IP address to serve as a jump host to access other servers and services within the VPC.\n\n### Configure the VPC NFS server(s)\nConfigures the NFS server using the specs in the `nfs_server` configuration object(s). It installs the required packages and sets up the NFSv4 service. Additionally, it will format the empty volume as `xfs` and export it so it can be used by the `managed-nfs-storage` storage class in the OpenShift cluster.\n\n### Configure the OpenShift storage classes\nThis steps takes care of configuring the storage classes in the OpenShift cluster. Storage classes are an abstraction of the underlying physical and virtual storage. When run, it processes the `openshift_storage` elements within the current `openshift` configuration object.\n\nTwo types of storage classes can be automatically created and configured:\n\n#### NFS Storage\nCreates the `managed-nfs-storage` OpenShift storage class using the specified `nfs_server_name` which references an `nfs_server` configuration object.\n\n#### OCS Storage\nActivates the ROKS cluster's OpenShift Container Storage add-on to install the operator into the cluster. Once finished with the preparation, the `OcsCluster` OpenShift object is created to provision the storage cluster. As the backing storage the `ibmc-vpc-block-metro-10iops-tier` storage class is used, which has the appropriate IO characteristics for the Cloud Paks.\n\n<InlineNotification>\nBoth NFS and OCS storage classes can be created but only 1 storage class of each type can exist in the cluster at the moment. If more than one storage class of the same type is specified, the configuration will fail.\n</InlineNotification>","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/cpd-design/process/configure-infra.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}