{"componentChunkName":"component---src-pages-cpd-design-components-monitoring-global-platform-connections-mdx","path":"/cpd-design/components/monitoring/global-platform-connections/","result":{"pageContext":{"frontmatter":{"title":"Global Platform connections"},"relativePagePath":"/cpd-design/components/monitoring/global-platform-connections.mdx","titleType":"page","MdxNode":{"id":"471b8fdc-4347-5a69-885d-0a60aa6dbb56","children":[],"parent":"237e5739-7543-5719-9c4f-09342128465f","internal":{"content":"---\ntitle: Global Platform connections\n---\n\n[<--...Back to monitors overview](/cpd-design/components/monitoring)\n\n## Global Platform Connections\n\nThis monitor counts the number of Global Platform connections and for each Global Platform Connection a test is executed to test whether the connection can still be established.\n\n## Generated metrics\nOnce the monitor is deployed, the following metrics are available in IBM Cloud Pak for Data.\n\n![Overview Events and Alerts](cp4d_events.png?raw=true \"Overview Events and Alerts\")\n\nOn the Platform Management Events page the following entries are added:\n- Cloud Pak for Data Global Connections Count\n- Global Connection - &lt;Global Connection Name&gt; (for each connection)\n\n### Using the IBM Cloud Pak for Data Prometheus endpoint\nhttps://&lt;CP4D-BASE-URL&gt;/zen/metrics\n\nIt will generate 2 types of metrics:\n\n- global_connections_count  \n  Provides the number of available connections\n- global_connection_valid    \n  For each connection, a test action is performed\n    - 1 (Test Connection success)\n    - 0 (Test connection failed)\n\n```\n# HELP global_connections_count \n# TYPE global_connections_count gauge\nglobal_connections_count{event_type=\"global_connections_count\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cloud Pak for Data Global Connections Count\"} 2\n\n# HELP global_connection_valid \n# TYPE global_connection_valid gauge\nglobal_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos MetaStore Connection\"} 1\nglobal_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos non-shared\"} 0\n```\n\n**Zen Watchdog metrics** (used in platform management events)\n- watchdog_cp4d_platform_global_connections_global_connections_count\n- watchdog_cp4d_platform_global_connections_global_connection_valid (for each connection)\n  \nZen Watchdog metrics can have the following values:\n- 2 (info)\n- 1 (warning)\n- 0 (critical)\n\n```\n# HELP watchdog_cp4d_platform_global_connections_global_connection_valid \n# TYPE watchdog_cp4d_platform_global_connections_global_connection_valid gauge\nwatchdog_cp4d_platform_global_connections_global_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos MetaStore Connection\"} 2\nwatchdog_cp4d_platform_global_connections_global_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos non-shared\"} 1\n\n# HELP watchdog_cp4d_platform_global_connections_global_connections_count \n# TYPE watchdog_cp4d_platform_global_connections_global_connections_count gauge\nwatchdog_cp4d_platform_global_connections_global_connections_count{event_type=\"global_connections_count\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cloud Pak for Data Global Connections Count\"} 2\n```\n\n## Install the Monitor using the Cloud Pak Deployer\n\n**Pre-requisite**: Ensure all secrets (source_token and target_cr) are configured in the vault prior to deploying the monitors. \n\nAdd the following section to the Cloud Pak Deployer configuration, or add the monitor to an existing `monitors` section:\n\n```\n# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: <OC_PROJECT>\n  openshift_cluster_name: pluto-01\n  default_monitor_source_repo: https://github.com/IBM/cloud-pak-deployer-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: cp4d-platform-global-connections\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret:  \n    #monitor_target_cr_user_password:\n    context: cp4d-platform-global-connections\n    label: latest\n    schedule: \"*/15 * * * *\"\n    event_types:\n    - name: \"global_connections_count\"\n      simple_name: \"Number of CP4D Platform connections\"\n      alert_type: \"platform\"\n      short_description: \"Number of CP4D Platform connections\"\n      long_description: \"Number of CP4D Platform connections: <global_connections_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"global_connection_valid\"\n      simple_name: \"Test CP4D Platform connection\"\n      alert_type: \"platform\"\n      short_description: \"Test CP4D Platform connection\"\n      long_description: \"Test result CP4D Platform connection: <global_connection_valid>\"\n      resolution: \"Validate the connection properties\"\n      reason_code_prefix: \"80\"\n```\n\n[<--...Back to monitors overview](/cpd-design/components/monitoring)","type":"Mdx","contentDigest":"37caf6190fa91b68461fc3b684a8e0e9","owner":"gatsby-plugin-mdx","counter":249},"frontmatter":{"title":"Global Platform connections"},"exports":{},"rawBody":"---\ntitle: Global Platform connections\n---\n\n[<--...Back to monitors overview](/cpd-design/components/monitoring)\n\n## Global Platform Connections\n\nThis monitor counts the number of Global Platform connections and for each Global Platform Connection a test is executed to test whether the connection can still be established.\n\n## Generated metrics\nOnce the monitor is deployed, the following metrics are available in IBM Cloud Pak for Data.\n\n![Overview Events and Alerts](cp4d_events.png?raw=true \"Overview Events and Alerts\")\n\nOn the Platform Management Events page the following entries are added:\n- Cloud Pak for Data Global Connections Count\n- Global Connection - &lt;Global Connection Name&gt; (for each connection)\n\n### Using the IBM Cloud Pak for Data Prometheus endpoint\nhttps://&lt;CP4D-BASE-URL&gt;/zen/metrics\n\nIt will generate 2 types of metrics:\n\n- global_connections_count  \n  Provides the number of available connections\n- global_connection_valid    \n  For each connection, a test action is performed\n    - 1 (Test Connection success)\n    - 0 (Test connection failed)\n\n```\n# HELP global_connections_count \n# TYPE global_connections_count gauge\nglobal_connections_count{event_type=\"global_connections_count\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cloud Pak for Data Global Connections Count\"} 2\n\n# HELP global_connection_valid \n# TYPE global_connection_valid gauge\nglobal_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos MetaStore Connection\"} 1\nglobal_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos non-shared\"} 0\n```\n\n**Zen Watchdog metrics** (used in platform management events)\n- watchdog_cp4d_platform_global_connections_global_connections_count\n- watchdog_cp4d_platform_global_connections_global_connection_valid (for each connection)\n  \nZen Watchdog metrics can have the following values:\n- 2 (info)\n- 1 (warning)\n- 0 (critical)\n\n```\n# HELP watchdog_cp4d_platform_global_connections_global_connection_valid \n# TYPE watchdog_cp4d_platform_global_connections_global_connection_valid gauge\nwatchdog_cp4d_platform_global_connections_global_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos MetaStore Connection\"} 2\nwatchdog_cp4d_platform_global_connections_global_connection_valid{event_type=\"global_connection_valid\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cognos non-shared\"} 1\n\n# HELP watchdog_cp4d_platform_global_connections_global_connections_count \n# TYPE watchdog_cp4d_platform_global_connections_global_connections_count gauge\nwatchdog_cp4d_platform_global_connections_global_connections_count{event_type=\"global_connections_count\",monitor_type=\"cp4d_platform_global_connections\",reference=\"Cloud Pak for Data Global Connections Count\"} 2\n```\n\n## Install the Monitor using the Cloud Pak Deployer\n\n**Pre-requisite**: Ensure all secrets (source_token and target_cr) are configured in the vault prior to deploying the monitors. \n\nAdd the following section to the Cloud Pak Deployer configuration, or add the monitor to an existing `monitors` section:\n\n```\n# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: <OC_PROJECT>\n  openshift_cluster_name: pluto-01\n  default_monitor_source_repo: https://github.com/IBM/cloud-pak-deployer-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: cp4d-platform-global-connections\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret:  \n    #monitor_target_cr_user_password:\n    context: cp4d-platform-global-connections\n    label: latest\n    schedule: \"*/15 * * * *\"\n    event_types:\n    - name: \"global_connections_count\"\n      simple_name: \"Number of CP4D Platform connections\"\n      alert_type: \"platform\"\n      short_description: \"Number of CP4D Platform connections\"\n      long_description: \"Number of CP4D Platform connections: <global_connections_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"global_connection_valid\"\n      simple_name: \"Test CP4D Platform connection\"\n      alert_type: \"platform\"\n      short_description: \"Test CP4D Platform connection\"\n      long_description: \"Test result CP4D Platform connection: <global_connection_valid>\"\n      resolution: \"Validate the connection properties\"\n      reason_code_prefix: \"80\"\n```\n\n[<--...Back to monitors overview](/cpd-design/components/monitoring)","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/cpd-design/components/monitoring/global-platform-connections.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}