{"componentChunkName":"component---src-pages-development-deployer-development-setup-mdx","path":"/development/deployer-development-setup/","result":{"pageContext":{"frontmatter":{"title":"Development","tabs":["Deployer Development Setup","Doc Development Setup","Doc Guidelines"]},"relativePagePath":"/development/deployer-development-setup.mdx","titleType":"page","MdxNode":{"id":"ea89d377-ee49-5c4f-a7d1-b68aa594a9a0","children":[],"parent":"5f019aa6-5afe-51ef-98b0-bc06ca695253","internal":{"content":"---\ntitle: Development\ntabs: ['Deployer Development Setup', 'Doc Development Setup', 'Doc Guidelines']\n---\n\n# Deployer Development Setup\n\n## Cloud Pak Deployer command line\nThe Cloud Pak Deployer runs as a container on the server. When you're in the process of developing new features, having to always rebuild the image is a bit of a pain, hence we've introduced a special command line parameter.\n\n```\n./cp-deploy.sh env apply .... --cpd-develop [--accept-all-liceneses]\n```\n\nWhen adding the `--cpd-develop` parameter to the command line, the current directory is mapped as a volume to the `/cloud-pak-deployer` directory within the container. This means that any latest changes you've done to the Ansible playbooks or other commands will take effect immediately.\n\n<InlineNotification kind=\"warning\">\nEven though it is possible to run the deployer multiple times in parallel, for different environments, please be aware that is NOT possible when you use the `--cpd-develop` parameter. If you run two deploy processes with this parameters, you will see errors with permissions.\n</InlineNotification>\n\n## Remote development with Visual Studio Code\nYou can do remote development on a Linux server and run the deployer from there.\n\n### Prepare the Linux server\nTo allow for remote development, a number of packages need to be installed on the Linux server. Not having these will cause VSCode not to work and the error messages are difficult to debug.\n* git\n* podman\n* wget\n* unzip\n* tar\n\n### Clone the repository\nClone the repository using a `git` command. The command below is the clone of the main Cloud Pak Deployer repository. If you have forked the repository to develop features, you will have to use the URL of your own fork.\n```\ngit clone https://github.com/IBM/cloud-pak-deployer.git\n```\n\n### Change Git settings for development\nTo be able to commit changes to your cloned repository, you need to set up an author name and e-mail address. Also, we recommend to set Git's password cache so that you don't have to enter the user and token every time you want to fetch the changes or push to the upstream repository. In the below example, the cache is set up to ask for the password only if it has been longer than 1 day since the last sync.\n```\ngit config --global user.name \"Your full name\"\ngit config --global user.email \"your_email_address\"\ngit config --global credential.helper \"cache --timeout=86400\"\n```\n\n### Set up password-less ssh to the development server\nIf you want to avoid having to logon to the server when you set up remote development with VSCode, you can configure password-less `ssh` to the development server.\n```\nssh-copy-id -i ~/.ssh/id_rsa.pub root@<your_development_server>\n```\n\n### Connect VSCode to the development server\n* Click on the green icon in the lower left of VSCode\n* Open SSH Config file, choose the one in your home directory\n* Add the following lines:\n```\nHost nickname_of_your_server\n   HostName ip_address_of_your_server\n   User root\n```\n\nOnce you have set up this server in the SSH config file, you can connect to it and start remote development. \n* Open\n* Select the `cloud-pak-deployer` directory (this is the cloned repository)\n* As the directory is a cloned Git repo, VSCode will automatically open the default branch\n\nFrom that point forward you can use VSCode as if you were working on your laptop, make changes and use a separate terminal to test your changes.\n","type":"Mdx","contentDigest":"5f6341db6402800aa4de439617224172","owner":"gatsby-plugin-mdx","counter":194},"frontmatter":{"title":"Development","tabs":["Deployer Development Setup","Doc Development Setup","Doc Guidelines"]},"exports":{},"rawBody":"---\ntitle: Development\ntabs: ['Deployer Development Setup', 'Doc Development Setup', 'Doc Guidelines']\n---\n\n# Deployer Development Setup\n\n## Cloud Pak Deployer command line\nThe Cloud Pak Deployer runs as a container on the server. When you're in the process of developing new features, having to always rebuild the image is a bit of a pain, hence we've introduced a special command line parameter.\n\n```\n./cp-deploy.sh env apply .... --cpd-develop [--accept-all-liceneses]\n```\n\nWhen adding the `--cpd-develop` parameter to the command line, the current directory is mapped as a volume to the `/cloud-pak-deployer` directory within the container. This means that any latest changes you've done to the Ansible playbooks or other commands will take effect immediately.\n\n<InlineNotification kind=\"warning\">\nEven though it is possible to run the deployer multiple times in parallel, for different environments, please be aware that is NOT possible when you use the `--cpd-develop` parameter. If you run two deploy processes with this parameters, you will see errors with permissions.\n</InlineNotification>\n\n## Remote development with Visual Studio Code\nYou can do remote development on a Linux server and run the deployer from there.\n\n### Prepare the Linux server\nTo allow for remote development, a number of packages need to be installed on the Linux server. Not having these will cause VSCode not to work and the error messages are difficult to debug.\n* git\n* podman\n* wget\n* unzip\n* tar\n\n### Clone the repository\nClone the repository using a `git` command. The command below is the clone of the main Cloud Pak Deployer repository. If you have forked the repository to develop features, you will have to use the URL of your own fork.\n```\ngit clone https://github.com/IBM/cloud-pak-deployer.git\n```\n\n### Change Git settings for development\nTo be able to commit changes to your cloned repository, you need to set up an author name and e-mail address. Also, we recommend to set Git's password cache so that you don't have to enter the user and token every time you want to fetch the changes or push to the upstream repository. In the below example, the cache is set up to ask for the password only if it has been longer than 1 day since the last sync.\n```\ngit config --global user.name \"Your full name\"\ngit config --global user.email \"your_email_address\"\ngit config --global credential.helper \"cache --timeout=86400\"\n```\n\n### Set up password-less ssh to the development server\nIf you want to avoid having to logon to the server when you set up remote development with VSCode, you can configure password-less `ssh` to the development server.\n```\nssh-copy-id -i ~/.ssh/id_rsa.pub root@<your_development_server>\n```\n\n### Connect VSCode to the development server\n* Click on the green icon in the lower left of VSCode\n* Open SSH Config file, choose the one in your home directory\n* Add the following lines:\n```\nHost nickname_of_your_server\n   HostName ip_address_of_your_server\n   User root\n```\n\nOnce you have set up this server in the SSH config file, you can connect to it and start remote development. \n* Open\n* Select the `cloud-pak-deployer` directory (this is the cloned repository)\n* As the directory is a cloned Git repo, VSCode will automatically open the default branch\n\nFrom that point forward you can use VSCode as if you were working on your laptop, make changes and use a separate terminal to test your changes.\n","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/development/deployer-development-setup.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}