{"componentChunkName":"component---src-pages-development-doc-development-setup-index-mdx","path":"/development/doc-development-setup/","result":{"pageContext":{"frontmatter":{"title":"Documentation Development setup"},"relativePagePath":"/development/doc-development-setup/index.mdx","titleType":"page","MdxNode":{"id":"5ae35c75-7513-5d68-929a-478cc14e7b3e","children":[],"parent":"bc952e6d-7129-5250-bfc7-fc415c987924","internal":{"content":"---\ntitle: Documentation Development setup\n---\n\n# Documentation Development setup\n\nGatsby themes encapsulate all of the configuration and implementation details of Gatsby websites. This GitHub repository has been built with a dependancy on the gatsby-theme-carbon package. The primary goal of gatsby-theme-carbon is to get content authors speaking the IBM Design Language with Carbon as soon as possible. This GiHub repository is connected to Travis any commit will cause a build of the GitHub pages to be triggered. A better way of working is to use the tooling from a loacal system\n\n## Local tooling installation\nIf you want to test the documentation pages you're developing, it is best to run Gatsby in a container and map your local doc folder to a folder inside the container. This avoids having to install nvm and many modules on your workstation.\n\nDo the following:\n* Make sure you have cloned this repository to your development server\n* Start from the main directory of the cloud-pak-deployer repository\n```\ncd doc\npodman build -t cpd-doc .\n```\n\nThis will build a Red Hat UBI image with `nvm` and the required Node.js modules already installed. It will take ~5-10 minutes to complete this step, dependent on your network bandwidth.\n\n## Running the documentation image\n```\npodman rm -f cpd-doc 2>/dev/null && \\\nrm -rf public node_modules .cache package-lock.json && \\\npodman run --name cpd-doc -d -p 8000:8000 -v $PWD:/doc:Z cpd-doc:latest && \\\npodman logs -fl\n```\n\nThis will start the container as a daemon and tail the logs. It will take approximaely 5-10 minutes to download packages and build the server. Once finished, you will see the following message:\n```output\n✖ 6 problems (0 errors, 6 warnings)\n\nsuccess Building development bundle - 369.543s\n```\n\nWhenever you save changes to a document, the logs will show something:\n```output\ninfo changed file at /doc/src/pages/tools/development-setup.mdx\nsuccess building schema - 0.634s\ninfo Total nodes: 147, SitePage nodes: 17 (use --verbose for breakdown)\nsuccess createPages - 0.004s\nsuccess Checking for changed pages - 0.001s\nsuccess update schema - 0.047s\nsuccess onPreExtractQueries - 0.001s\nsuccess extract queries from components - 0.624s\n...\nsuccess Re-building development bundle - 2.436s\n```\n\n## Starting the browswer\nOnce you the container has fully started, it automatically tracks all changes in under the `doc` folder and updates the pages site automatically. You can view the site by opening a browswer for URL:\n\nhttp://localhost:8000\n\n## Stopping the documentation container\nIf you don't want to test your changes locally anymore, stop the docker container.\n```\npodman kill cpd-doc\n```\n\nNext time you want to test your changes, re-run the series of commands that delete the container, delete cache and build the documentation.\n\n## Removing the docker container and image\nIf you want to remove all from your development server, do the following:\n```\npodman rm -f cpd-doc\npodman rmi -f cpd-doc:latest\n```\n\nNote that after merging your updated documentation with the `main` branch, the pages site will be rendered by a GitHub action. Go to GitHub Actions if you want to monitor the build process.\n","type":"Mdx","contentDigest":"966c1d32492ec5df5660854989f7c506","owner":"gatsby-plugin-mdx","counter":257},"frontmatter":{"title":"Documentation Development setup"},"exports":{},"rawBody":"---\ntitle: Documentation Development setup\n---\n\n# Documentation Development setup\n\nGatsby themes encapsulate all of the configuration and implementation details of Gatsby websites. This GitHub repository has been built with a dependancy on the gatsby-theme-carbon package. The primary goal of gatsby-theme-carbon is to get content authors speaking the IBM Design Language with Carbon as soon as possible. This GiHub repository is connected to Travis any commit will cause a build of the GitHub pages to be triggered. A better way of working is to use the tooling from a loacal system\n\n## Local tooling installation\nIf you want to test the documentation pages you're developing, it is best to run Gatsby in a container and map your local doc folder to a folder inside the container. This avoids having to install nvm and many modules on your workstation.\n\nDo the following:\n* Make sure you have cloned this repository to your development server\n* Start from the main directory of the cloud-pak-deployer repository\n```\ncd doc\npodman build -t cpd-doc .\n```\n\nThis will build a Red Hat UBI image with `nvm` and the required Node.js modules already installed. It will take ~5-10 minutes to complete this step, dependent on your network bandwidth.\n\n## Running the documentation image\n```\npodman rm -f cpd-doc 2>/dev/null && \\\nrm -rf public node_modules .cache package-lock.json && \\\npodman run --name cpd-doc -d -p 8000:8000 -v $PWD:/doc:Z cpd-doc:latest && \\\npodman logs -fl\n```\n\nThis will start the container as a daemon and tail the logs. It will take approximaely 5-10 minutes to download packages and build the server. Once finished, you will see the following message:\n```output\n✖ 6 problems (0 errors, 6 warnings)\n\nsuccess Building development bundle - 369.543s\n```\n\nWhenever you save changes to a document, the logs will show something:\n```output\ninfo changed file at /doc/src/pages/tools/development-setup.mdx\nsuccess building schema - 0.634s\ninfo Total nodes: 147, SitePage nodes: 17 (use --verbose for breakdown)\nsuccess createPages - 0.004s\nsuccess Checking for changed pages - 0.001s\nsuccess update schema - 0.047s\nsuccess onPreExtractQueries - 0.001s\nsuccess extract queries from components - 0.624s\n...\nsuccess Re-building development bundle - 2.436s\n```\n\n## Starting the browswer\nOnce you the container has fully started, it automatically tracks all changes in under the `doc` folder and updates the pages site automatically. You can view the site by opening a browswer for URL:\n\nhttp://localhost:8000\n\n## Stopping the documentation container\nIf you don't want to test your changes locally anymore, stop the docker container.\n```\npodman kill cpd-doc\n```\n\nNext time you want to test your changes, re-run the series of commands that delete the container, delete cache and build the documentation.\n\n## Removing the docker container and image\nIf you want to remove all from your development server, do the following:\n```\npodman rm -f cpd-doc\npodman rmi -f cpd-doc:latest\n```\n\nNote that after merging your updated documentation with the `main` branch, the pages site will be rendered by a GitHub action. Go to GitHub Actions if you want to monitor the build process.\n","fileAbsolutePath":"/home/runner/work/cloud-pak-deployer/cloud-pak-deployer/doc/src/pages/development/doc-development-setup/index.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}